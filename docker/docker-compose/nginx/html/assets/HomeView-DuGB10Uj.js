import{t as e}from"./css-E3i9oLPS.js";import{Mt as t,P as n,Y as r,_ as i,d as a,f as o,j as s,m as c,p as l,rt as u,t as d,u as f,v as p,y as m}from"./_plugin-vue_export-helper-Db-PtwND.js";import"./session-C5oAodxY.js";import{t as h}from"./css-CprhpbK2.js";import"./http-D8xhHfNR.js";import{n as g}from"./product-Crb70r_K.js";import{c as _}from"./order-D4p09QkI.js";var v={class:`grid`},y={class:`glass-card hero`},b={class:`stats`},x={class:`glass-card metric`},S={class:`glass-card metric`},C={class:`glass-card metric`},w=d(m({__name:`HomeView`,setup(d){let m=u(!1),w=u(null),T=u(null),E=u(null),D=u(``),O=f(()=>!T.value||!E.value?`0%`:`${Math.round(E.value/T.value*100)}%`);async function k(){m.value=!0,D.value=``;let[e,t]=await Promise.allSettled([g({page:1,size:1}),_({page:1,size:20})]);e.status===`fulfilled`?w.value=e.value.total:(w.value=null,D.value=e.reason instanceof Error?e.reason.message:`Products API unavailable`),t.status===`fulfilled`?(T.value=t.value.total,E.value=t.value.records.filter(e=>e.status===0).length):(T.value=null,E.value=null,D.value=t.reason instanceof Error?t.reason.message:`Orders API unavailable`),m.value=!1}return s(()=>{k()}),(s,u)=>{var d,f;let g=e,_=h;return n(),c(`div`,v,[a(`section`,y,[u[1]||(u[1]=a(`div`,null,[a(`p`,{class:`eyebrow`},`Daily Briefing`),a(`h3`,null,`Operations Snapshot`),a(`p`,{class:`muted`},`Real-time values from product and order services.`)],-1)),p(g,{loading:m.value,round:``,type:`primary`,onClick:k},{default:r(()=>[...u[0]||(u[0]=[i(`Refresh`,-1)])]),_:1},8,[`loading`])]),a(`section`,b,[a(`article`,x,[u[2]||(u[2]=a(`p`,null,`Total products`,-1)),a(`strong`,null,t((d=w.value)==null?`--`:d),1)]),a(`article`,S,[u[3]||(u[3]=a(`p`,null,`Total orders`,-1)),a(`strong`,null,t((f=T.value)==null?`--`:f),1)]),a(`article`,C,[u[4]||(u[4]=a(`p`,null,`Pending payment ratio`,-1)),a(`strong`,null,t(O.value),1)])]),D.value?(n(),o(_,{key:0,closable:!1,"show-icon":``,type:`warning`,title:D.value},null,8,[`title`])):l(``,!0)])}}}),[[`__scopeId`,`data-v-03ef405a`]]);export{w as default};