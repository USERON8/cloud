import{F as e,M as t,N as n,P as r,X as i,Z as a,bt as o,et as s,j as c}from"./css-gYsclK9r.js";import{$ as l,A as u,C as d,J as f,M as p,R as m,Y as h,b as g,dt as _,it as v,tt as y,u as b,y as x}from"./_plugin-vue_export-helper-CS_DzLMV.js";import{i as S}from"./focus-trap.vue-3AAhBBSe.js";import{t as C}from"./vnode-IUMfc0BT.js";var w=e=>{if(!e)return{onClick:_,onMousedown:_,onMouseup:_};let t=!1,n=!1;return{onClick:r=>{t&&n&&e(r),t=n=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},T=i({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:a([String,Array,Object])},zIndex:{type:a([String,Number])}}),E={click:e=>e instanceof MouseEvent},D=`overlay`,O=g({name:`ElOverlay`,props:T,emits:E,setup(e,{slots:t,emit:n}){let r=o(D),{onClick:i,onMousedown:a,onMouseup:s}=w(e.customMaskEvent?void 0:e=>{n(`click`,e)});return()=>e.mask?x(`div`,{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:a,onMouseup:s},[m(t,`default`)],C.STYLE|C.CLASS|C.PROPS,[`onClick`,`onMouseup`,`onMousedown`]):d(`div`,{class:e.overlayClass,style:{zIndex:e.zIndex,position:`fixed`,top:`0px`,right:`0px`,bottom:`0px`,left:`0px`}},[m(t,`default`)])}}),k=(e,n,r,i)=>{let a={offsetX:0,offsetY:0},o=v(!1),s=(n,r)=>{if(e.value){let{offsetX:o,offsetY:s}=a,c=e.value.getBoundingClientRect(),l=c.left,u=c.top,d=c.width,f=c.height,p=document.documentElement.clientWidth,m=document.documentElement.clientHeight,h=-l+o,g=-u+s,_=p-l-d+o,v=m-u-(f<m?f:0)+s;i!=null&&i.value||(n=Math.min(Math.max(n,h),_),r=Math.min(Math.max(r,g),v)),a.offsetX=n,a.offsetY=r,e.value.style.transform=`translate(${t(n)}, ${t(r)})`}},c=e=>{let t=e.clientX,n=e.clientY,{offsetX:r,offsetY:i}=a,c=e=>{o.value||(o.value=!0),s(r+e.clientX-t,i+e.clientY-n)},l=()=>{o.value=!1,document.removeEventListener(`mousemove`,c),document.removeEventListener(`mouseup`,l)};document.addEventListener(`mousemove`,c),document.addEventListener(`mouseup`,l)},l=()=>{n.value&&e.value&&(n.value.addEventListener(`mousedown`,c),window.addEventListener(`resize`,m))},d=()=>{n.value&&e.value&&(n.value.removeEventListener(`mousedown`,c),window.removeEventListener(`resize`,m))},f=()=>{a.offsetX=0,a.offsetY=0,e.value&&(e.value.style.transform=``)},m=()=>{let{offsetX:e,offsetY:t}=a;s(e,t)};return p(()=>{h(()=>{r.value?l():d()})}),u(()=>{d()}),{isDragging:o,resetPosition:f,updatePosition:m}},A=(t,i={})=>{l(t)||s(`[useLockscreen]`,`You need to pass a ref param to this function`);let a=i.ns||o(`popup`),u=b(()=>a.bm(`parent`,`hidden`)),d=0,p=!1,m=`0`,h=!1,g=()=>{h||(h=!0,setTimeout(()=>{typeof document>`u`||p&&document&&(document.body.style.width=m,e(document.body,u.value))},200))};f(t,e=>{if(!e){g();return}h=!1,p=!r(document.body,u.value),p&&(m=document.body.style.width,c(document.body,u.value)),d=S(a.namespace.value);let t=document.documentElement.clientHeight<document.body.scrollHeight,i=n(document.body,`overflowY`);d>0&&(t||i===`scroll`)&&p&&(document.body.style.width=`calc(100% - ${d}px)`)}),y(()=>g())};export{w as i,k as n,O as r,A as t};