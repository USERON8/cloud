import{t as e}from"./css-gYsclK9r.js";import{F as t,L as n,X as r,a as i,b as a,d as o,it as s,m as c,nt as l,t as u,v as d,y as f}from"./_plugin-vue_export-helper-CS_DzLMV.js";import{c as p,g as m}from"./session-ki_suUwh.js";import{n as h,r as g}from"./index-D2O9aft2.js";import{n as _,t as v}from"./css-Ba-7P5h0.js";import{t as y}from"./css-PREK1Btt.js";import{n as b,t as x}from"./css-BtLmholR.js";import{t as S}from"./message-DyMrUQQL.js";import"./http-CgWw7_UJ.js";import{t as C}from"./auth-BUxxQ95I.js";var w={class:`signin-page`},T={class:`signin-card glass-card`},E=u(a({__name:`LoginView`,setup(a){let u=g(),E=h(),D=s(!1),O=l({username:``,password:``,userType:`USER`});(typeof E.query.entry==`string`?E.query.entry.toLowerCase():``)===`merchant`&&(O.userType=`MERCHANT`);let k=[{label:`Consumer`,value:`USER`},{label:`Merchant`,value:`MERCHANT`}];async function A(){if(!O.username||!O.password){S.warning(`Please input username and password.`);return}O.userType===`ADMIN`&&(O.userType=`USER`),D.value=!0;try{p(await C(O)),S.success(`Signed in successfully.`);let e=typeof E.query.redirect==`string`?E.query.redirect:`/app/home`;await u.replace(e)}catch(e){let t=e instanceof Error?e.message:`Sign in failed`;S.error(t)}finally{D.value=!1}}function j(){localStorage.setItem(`shop.oauth.intent`,`auto`),window.location.href=`/oauth2/authorization/github`}return(a,s)=>{let l=y,u=b,p=v,h=_,g=e,S=x;return t(),c(`div`,w,[o(`section`,T,[s[10]||(s[10]=o(`header`,null,[o(`p`,{class:`eyebrow`},`My Shop`),o(`h1`,null,`Sign In`),o(`p`,{class:`muted`},`One account for Web, Android, and iOS.`)],-1)),f(S,{"label-position":`top`,onSubmit:m(A,[`prevent`])},{default:r(()=>[f(u,{label:`Username`},{default:r(()=>[f(l,{modelValue:O.username,"onUpdate:modelValue":s[0]||(s[0]=e=>O.username=e),autocomplete:`username`,placeholder:`4-20 characters`},null,8,[`modelValue`])]),_:1}),f(u,{label:`Password`},{default:r(()=>[f(l,{modelValue:O.password,"onUpdate:modelValue":s[1]||(s[1]=e=>O.password=e),autocomplete:`current-password`,"show-password":``,type:`password`,placeholder:`8-20 characters`},null,8,[`modelValue`])]),_:1}),f(u,{label:`Account Type`},{default:r(()=>[f(h,{modelValue:O.userType,"onUpdate:modelValue":s[2]||(s[2]=e=>O.userType=e),class:`full-width`},{default:r(()=>[(t(),c(i,null,n(k,e=>f(p,{key:e.value,label:e.label,value:e.value},null,8,[`label`,`value`])),64))]),_:1},8,[`modelValue`])]),_:1}),f(g,{loading:D.value,class:`full-width`,round:``,type:`primary`,onClick:A},{default:r(()=>[...s[4]||(s[4]=[d(` Continue `,-1)])]),_:1},8,[`loading`]),s[7]||(s[7]=o(`div`,{class:`oauth-divider-line`},[o(`span`,null,`其他方式登录`)],-1)),o(`div`,{class:`oauth-icon-row`},[o(`button`,{class:`oauth-icon-btn`,type:`button`,onClick:j},[...s[5]||(s[5]=[o(`svg`,{viewBox:`0 0 24 24`,"aria-hidden":`true`},[o(`path`,{d:`M12 2C6.48 2 2 6.58 2 12.22c0 4.5 2.87 8.3 6.84 9.65.5.1.68-.22.68-.5 0-.25-.01-1.08-.01-1.96-2.78.62-3.37-1.21-3.37-1.21-.45-1.19-1.1-1.5-1.1-1.5-.9-.63.07-.62.07-.62 1 .07 1.52 1.05 1.52 1.05.88 1.56 2.3 1.11 2.86.85.09-.66.35-1.11.63-1.37-2.22-.26-4.55-1.14-4.55-5.09 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.31.1-2.73 0 0 .84-.28 2.75 1.05A9.3 9.3 0 0 1 12 6.9c.85 0 1.7.12 2.5.36 1.9-1.33 2.74-1.05 2.74-1.05.55 1.42.2 2.47.1 2.73.64.72 1.03 1.64 1.03 2.76 0 3.96-2.33 4.82-4.56 5.08.36.32.68.94.68 1.9 0 1.37-.01 2.47-.01 2.8 0 .28.18.6.69.5A10.23 10.23 0 0 0 22 12.22C22 6.58 17.52 2 12 2Z`})],-1)])])]),s[8]||(s[8]=o(`p`,{class:`oauth-entry-tip`},`GitHub 登录/注册`,-1)),s[9]||(s[9]=o(`p`,{class:`oauth-note`},` First GitHub login will create a new account automatically. `,-1)),f(g,{class:`full-width back-market`,plain:``,round:``,onClick:s[3]||(s[3]=e=>a.$router.push(`/market`))},{default:r(()=>[...s[6]||(s[6]=[d(` 返回访客主页 `,-1)])]),_:1})]),_:1})])])}}}),[[`__scopeId`,`data-v-190c9695`]]);export{E as default};