import{t as e}from"./css-E3i9oLPS.js";import{At as t,I as n,Mt as r,P as i,R as a,Y as o,_ as s,a as c,d as l,f as u,m as d,t as f,u as p,v as m,y as h}from"./_plugin-vue_export-helper-Db-PtwND.js";import{o as g,t as _}from"./session-C5oAodxY.js";import{n as v,r as y,t as b}from"./index-BbrdovWU.js";import{t as x}from"./message-CbR1IZY7.js";import"./http-D8xhHfNR.js";import{n as S}from"./auth-CFegevxm.js";var C={class:`app-shell`},w={class:`desktop-nav glass-card`},T={class:`dot`},E={class:`main-panel`},D={class:`top-bar glass-card`},O={class:`top-actions`},k={class:`role-chip`},A={class:`user-chip`},j={class:`content`},M={class:`mobile-tab glass-card`},N={class:`dot`},P=f(h({__name:`AppLayout`,setup(f){let h=v(),P=y(),{role:F}=b(),I=[{label:`Dashboard`,path:`/home`,icon:`D`,roles:[`USER`,`MERCHANT`,`ADMIN`]},{label:`Products`,path:`/catalog`,icon:`P`,roles:[`USER`,`MERCHANT`,`ADMIN`]},{label:`Product Admin`,path:`/catalog/manage`,icon:`M`,roles:[`MERCHANT`,`ADMIN`]},{label:`Orders`,path:`/orders`,icon:`O`,roles:[`USER`,`MERCHANT`,`ADMIN`]},{label:`Order Admin`,path:`/orders/manage`,icon:`R`,roles:[`MERCHANT`,`ADMIN`]},{label:`Profile`,path:`/profile`,icon:`U`,roles:[`USER`,`MERCHANT`,`ADMIN`]}],L=p(()=>I.filter(e=>e.roles.includes(F.value))),R=p(()=>String(h.meta.title||`My Shop`)),z=p(()=>{var e,t;return((e=g.user)==null?void 0:e.nickname)||((t=g.user)==null?void 0:t.username)||`Current User`}),B=p(()=>F.value);function V(e){return e===`/catalog`?h.path===`/catalog`:e===`/catalog/manage`?h.path===`/catalog/manage`:e===`/orders`?h.path===`/orders`:e===`/orders/manage`?h.path===`/orders/manage`:h.path===e||h.path.startsWith(`${e}/`)}async function H(){try{await S()}catch(e){}finally{_(),x.success(`Signed out.`),await P.replace(`/login`)}}return(f,p)=>{let h=a(`router-link`),g=e,_=a(`router-view`);return i(),d(`div`,C,[l(`aside`,w,[p[0]||(p[0]=l(`h1`,{class:`brand`},`My Shop`,-1)),(i(!0),d(c,null,n(L.value,e=>(i(),u(h,{key:e.path,to:e.path,class:t([`nav-link`,{active:V(e.path)}])},{default:o(()=>[l(`span`,T,r(e.icon),1),s(` `+r(e.label),1)]),_:2},1032,[`to`,`class`]))),128))]),l(`main`,E,[l(`header`,D,[l(`div`,null,[p[1]||(p[1]=l(`div`,{class:`muted`},`Apple-like mobile-first UI`,-1)),l(`h2`,null,r(R.value),1)]),l(`div`,O,[l(`span`,k,r(B.value),1),l(`span`,A,r(z.value),1),m(g,{round:``,onClick:H},{default:o(()=>[...p[2]||(p[2]=[s(`Sign Out`,-1)])]),_:1})])]),l(`section`,j,[m(_)])]),l(`nav`,M,[(i(!0),d(c,null,n(L.value,e=>(i(),u(h,{key:e.path,to:e.path,class:t([`tab-item`,{active:V(e.path)}])},{default:o(()=>[l(`span`,N,r(e.icon),1),l(`span`,null,r(e.label),1)]),_:2},1032,[`to`,`class`]))),128))])])}}}),[[`__scopeId`,`data-v-067b1773`]]);export{P as default};