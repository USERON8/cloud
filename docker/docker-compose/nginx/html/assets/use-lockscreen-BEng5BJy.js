import{$ as e,A as t,C as n,J as r,M as i,R as a,Y as o,b as s,dt as c,it as l,tt as u,u as d,y as f}from"./_plugin-vue_export-helper-7ehu3f-T.js";import{F as p,M as m,N as h,P as g,X as _,Z as v,bt as y,et as b,j as x}from"./css-DepZNlzm.js";import{i as S}from"./focus-trap.vue-BpR7yhgt.js";import{t as C}from"./vnode-CtRD2k6y.js";var w=e=>{if(!e)return{onClick:c,onMousedown:c,onMouseup:c};let t=!1,n=!1;return{onClick:r=>{t&&n&&e(r),t=n=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},T=_({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:v([String,Array,Object])},zIndex:{type:v([String,Number])}}),E={click:e=>e instanceof MouseEvent},D=`overlay`,O=s({name:`ElOverlay`,props:T,emits:E,setup(e,{slots:t,emit:r}){let i=y(D),{onClick:o,onMousedown:s,onMouseup:c}=w(e.customMaskEvent?void 0:e=>{r(`click`,e)});return()=>e.mask?f(`div`,{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:s,onMouseup:c},[a(t,`default`)],C.STYLE|C.CLASS|C.PROPS,[`onClick`,`onMouseup`,`onMousedown`]):n(`div`,{class:e.overlayClass,style:{zIndex:e.zIndex,position:`fixed`,top:`0px`,right:`0px`,bottom:`0px`,left:`0px`}},[a(t,`default`)])}}),k=(e,n,r,a)=>{let s={offsetX:0,offsetY:0},c=l(!1),u=(t,n)=>{if(e.value){let{offsetX:r,offsetY:i}=s,o=e.value.getBoundingClientRect(),c=o.left,l=o.top,u=o.width,d=o.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,h=-c+r,g=-l+i,_=f-c-u+r,v=p-l-(d<p?d:0)+i;a!=null&&a.value||(t=Math.min(Math.max(t,h),_),n=Math.min(Math.max(n,g),v)),s.offsetX=t,s.offsetY=n,e.value.style.transform=`translate(${m(t)}, ${m(n)})`}},d=e=>{let t=e.clientX,n=e.clientY,{offsetX:r,offsetY:i}=s,a=e=>{c.value||(c.value=!0),u(r+e.clientX-t,i+e.clientY-n)},o=()=>{c.value=!1,document.removeEventListener(`mousemove`,a),document.removeEventListener(`mouseup`,o)};document.addEventListener(`mousemove`,a),document.addEventListener(`mouseup`,o)},f=()=>{n.value&&e.value&&(n.value.addEventListener(`mousedown`,d),window.addEventListener(`resize`,g))},p=()=>{n.value&&e.value&&(n.value.removeEventListener(`mousedown`,d),window.removeEventListener(`resize`,g))},h=()=>{s.offsetX=0,s.offsetY=0,e.value&&(e.value.style.transform=``)},g=()=>{let{offsetX:e,offsetY:t}=s;u(e,t)};return i(()=>{o(()=>{r.value?f():p()})}),t(()=>{p()}),{isDragging:c,resetPosition:h,updatePosition:g}},A=(t,n={})=>{e(t)||b(`[useLockscreen]`,`You need to pass a ref param to this function`);let i=n.ns||y(`popup`),a=d(()=>i.bm(`parent`,`hidden`)),o=0,s=!1,c=`0`,l=!1,f=()=>{l||(l=!0,setTimeout(()=>{typeof document>`u`||s&&document&&(document.body.style.width=c,p(document.body,a.value))},200))};r(t,e=>{if(!e){f();return}l=!1,s=!g(document.body,a.value),s&&(c=document.body.style.width,x(document.body,a.value)),o=S(i.namespace.value);let t=document.documentElement.clientHeight<document.body.scrollHeight,n=h(document.body,`overflowY`);o>0&&(t||n===`scroll`)&&s&&(document.body.style.width=`calc(100% - ${o}px)`)}),u(()=>f())};export{w as i,k as n,O as r,A as t};