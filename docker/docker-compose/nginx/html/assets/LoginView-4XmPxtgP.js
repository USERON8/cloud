import{t as e}from"./css-E3i9oLPS.js";import{I as t,P as n,Y as r,_ as i,a,d as o,m as s,rt as c,t as l,tt as u,v as d,y as f}from"./_plugin-vue_export-helper-Db-PtwND.js";import{h as p,s as m}from"./session-C5oAodxY.js";import{n as h,r as g}from"./index-COPDY7zS.js";import{n as _,t as v}from"./css-CraHvIK0.js";import{t as y}from"./css-BuQUL2TQ.js";import{n as b,t as x}from"./css-BsJVaiF6.js";import{t as S}from"./message-CbR1IZY7.js";import"./http-D8xhHfNR.js";import{t as C}from"./auth-CFegevxm.js";var w={class:`signin-page`},T={class:`signin-card glass-card`},E=l(f({__name:`LoginView`,setup(l){let f=g(),E=h(),D=c(!1),O=u({username:``,password:``,userType:`USER`}),k=[{label:`Consumer`,value:`USER`},{label:`Merchant`,value:`MERCHANT`},{label:`Administrator`,value:`ADMIN`}];async function A(){if(!O.username||!O.password){S.warning(`Please input username and password.`);return}D.value=!0;try{m(await C(O)),S.success(`Signed in successfully.`);let e=typeof E.query.redirect==`string`?E.query.redirect:`/home`;await f.replace(e)}catch(e){let t=e instanceof Error?e.message:`Sign in failed`;S.error(t)}finally{D.value=!1}}function j(e){localStorage.setItem(`shop.oauth.intent`,e),window.location.href=`/oauth2/authorization/github`}return(c,l)=>{let u=y,f=b,m=v,h=_,g=e,S=x;return n(),s(`div`,w,[o(`section`,T,[l[10]||(l[10]=o(`header`,null,[o(`p`,{class:`eyebrow`},`My Shop`),o(`h1`,null,`Sign In`),o(`p`,{class:`muted`},`One account for Web, Android, and iOS.`)],-1)),d(S,{"label-position":`top`,onSubmit:p(A,[`prevent`])},{default:r(()=>[d(f,{label:`Username`},{default:r(()=>[d(u,{modelValue:O.username,"onUpdate:modelValue":l[0]||(l[0]=e=>O.username=e),autocomplete:`username`,placeholder:`4-20 characters`},null,8,[`modelValue`])]),_:1}),d(f,{label:`Password`},{default:r(()=>[d(u,{modelValue:O.password,"onUpdate:modelValue":l[1]||(l[1]=e=>O.password=e),autocomplete:`current-password`,"show-password":``,type:`password`,placeholder:`8-20 characters`},null,8,[`modelValue`])]),_:1}),d(f,{label:`Account Type`},{default:r(()=>[d(h,{modelValue:O.userType,"onUpdate:modelValue":l[2]||(l[2]=e=>O.userType=e),class:`full-width`},{default:r(()=>[(n(),s(a,null,t(k,e=>d(m,{key:e.value,label:e.label,value:e.value},null,8,[`label`,`value`])),64))]),_:1},8,[`modelValue`])]),_:1}),d(g,{loading:D.value,class:`full-width`,round:``,type:`primary`,onClick:A},{default:r(()=>[...l[5]||(l[5]=[i(` Continue `,-1)])]),_:1},8,[`loading`]),l[8]||(l[8]=o(`div`,{class:`oauth-divider`},`or`,-1)),d(g,{class:`full-width`,plain:``,round:``,onClick:l[3]||(l[3]=e=>j(`login`))},{default:r(()=>[...l[6]||(l[6]=[i(` Continue with GitHub `,-1)])]),_:1}),d(g,{class:`full-width`,plain:``,round:``,type:`success`,onClick:l[4]||(l[4]=e=>j(`register`))},{default:r(()=>[...l[7]||(l[7]=[i(` Register with GitHub `,-1)])]),_:1}),l[9]||(l[9]=o(`p`,{class:`oauth-note`},` First GitHub login will create a new account automatically. `,-1))]),_:1})])])}}}),[[`__scopeId`,`data-v-4e4586ac`]]);export{E as default};