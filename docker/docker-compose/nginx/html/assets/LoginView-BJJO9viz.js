import{F as e,L as t,X as n,a as r,b as i,d as a,it as o,m as s,nt as c,t as l,v as u,y as d}from"./_plugin-vue_export-helper-7ehu3f-T.js";import{c as f,g as p}from"./http-BtjM28wp.js";import{n as m,r as h}from"./index-D_UHLrTq.js";import{t as g}from"./css-DepZNlzm.js";import{n as _,t as v}from"./css-DjVlAzPB.js";import{t as y}from"./css-BaDt1NEF.js";import{n as b,t as x}from"./css-Yy0-Z0O_.js";import{t as S}from"./message-CA9T8QLS.js";import{t as C}from"./auth-VUrFAAGG.js";var w={class:`signin-page`},T={class:`signin-card glass-card`},E=l(i({__name:`LoginView`,setup(i){let l=h(),E=m(),D=o(!1),O=c({username:``,password:``,userType:`USER`});(typeof E.query.entry==`string`?E.query.entry.toLowerCase():``)===`merchant`&&(O.userType=`MERCHANT`);let k=[{label:`Consumer`,value:`USER`},{label:`Merchant`,value:`MERCHANT`}];async function A(){if(!O.username||!O.password){S.warning(`Please input username and password.`);return}O.userType===`ADMIN`&&(O.userType=`USER`),D.value=!0;try{f(await C(O)),S.success(`Signed in successfully.`);let e=typeof E.query.redirect==`string`?E.query.redirect:`/app/home`;await l.replace(e)}catch(e){let t=e instanceof Error?e.message:`Sign in failed`;S.error(t)}finally{D.value=!1}}function j(){localStorage.setItem(`shop.oauth.intent`,`auto`),window.location.href=`/oauth2/authorization/github`}return(i,o)=>{let c=y,l=b,f=v,m=_,h=g,S=x;return e(),s(`div`,w,[a(`section`,T,[o[10]||(o[10]=a(`header`,null,[a(`p`,{class:`eyebrow`},`My Shop`),a(`h1`,null,`Sign In`),a(`p`,{class:`muted`},`One account for Web, Android, and iOS.`)],-1)),d(S,{"label-position":`top`,onSubmit:p(A,[`prevent`])},{default:n(()=>[d(l,{label:`Username`},{default:n(()=>[d(c,{modelValue:O.username,"onUpdate:modelValue":o[0]||(o[0]=e=>O.username=e),autocomplete:`username`,placeholder:`4-20 characters`},null,8,[`modelValue`])]),_:1}),d(l,{label:`Password`},{default:n(()=>[d(c,{modelValue:O.password,"onUpdate:modelValue":o[1]||(o[1]=e=>O.password=e),autocomplete:`current-password`,"show-password":``,type:`password`,placeholder:`8-20 characters`},null,8,[`modelValue`])]),_:1}),d(l,{label:`Account Type`},{default:n(()=>[d(m,{modelValue:O.userType,"onUpdate:modelValue":o[2]||(o[2]=e=>O.userType=e),class:`full-width`},{default:n(()=>[(e(),s(r,null,t(k,e=>d(f,{key:e.value,label:e.label,value:e.value},null,8,[`label`,`value`])),64))]),_:1},8,[`modelValue`])]),_:1}),d(h,{loading:D.value,class:`full-width`,round:``,type:`primary`,onClick:A},{default:n(()=>[...o[4]||(o[4]=[u(` Continue `,-1)])]),_:1},8,[`loading`]),o[7]||(o[7]=a(`div`,{class:`oauth-divider-line`},[a(`span`,null,`其他方式登录`)],-1)),a(`div`,{class:`oauth-icon-row`},[a(`button`,{class:`oauth-icon-btn`,type:`button`,onClick:j},[...o[5]||(o[5]=[a(`svg`,{viewBox:`0 0 24 24`,"aria-hidden":`true`},[a(`path`,{d:`M12 2C6.48 2 2 6.58 2 12.22c0 4.5 2.87 8.3 6.84 9.65.5.1.68-.22.68-.5 0-.25-.01-1.08-.01-1.96-2.78.62-3.37-1.21-3.37-1.21-.45-1.19-1.1-1.5-1.1-1.5-.9-.63.07-.62.07-.62 1 .07 1.52 1.05 1.52 1.05.88 1.56 2.3 1.11 2.86.85.09-.66.35-1.11.63-1.37-2.22-.26-4.55-1.14-4.55-5.09 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.31.1-2.73 0 0 .84-.28 2.75 1.05A9.3 9.3 0 0 1 12 6.9c.85 0 1.7.12 2.5.36 1.9-1.33 2.74-1.05 2.74-1.05.55 1.42.2 2.47.1 2.73.64.72 1.03 1.64 1.03 2.76 0 3.96-2.33 4.82-4.56 5.08.36.32.68.94.68 1.9 0 1.37-.01 2.47-.01 2.8 0 .28.18.6.69.5A10.23 10.23 0 0 0 22 12.22C22 6.58 17.52 2 12 2Z`})],-1)])])]),o[8]||(o[8]=a(`p`,{class:`oauth-entry-tip`},`GitHub 登录/注册`,-1)),o[9]||(o[9]=a(`p`,{class:`oauth-note`},` First GitHub login will create a new account automatically. `,-1)),d(h,{class:`full-width back-market`,plain:``,round:``,onClick:o[3]||(o[3]=e=>i.$router.push(`/market`))},{default:n(()=>[...o[6]||(o[6]=[u(` 返回访客主页 `,-1)])]),_:1})]),_:1})])])}}}),[[`__scopeId`,`data-v-190c9695`]]);export{E as default};