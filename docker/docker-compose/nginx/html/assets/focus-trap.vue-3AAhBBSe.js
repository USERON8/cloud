import{Ct as e,I as t,X as n,Z as r,st as i}from"./css-gYsclK9r.js";import{A as a,D as o,Dt as s,F as c,I as l,J as u,M as d,R as f,b as p,f as m,it as h,o as g,ut as _}from"./_plugin-vue_export-helper-CS_DzLMV.js";import{i as v}from"./css-PREK1Btt.js";import{a as y,r as b}from"./message-DyMrUQQL.js";var x=n({to:{type:r([String,Object]),required:!0},disabled:Boolean}),S=t(p({__name:`teleport`,props:x,setup(e){return(e,t)=>e.disabled?f(e.$slots,`default`,{key:0}):(c(),m(g,{key:1,to:e.to},[f(e.$slots,`default`)],8,[`to`]))}})),C=e=>i?window.requestAnimationFrame(e):setTimeout(e,16),w,ee=e=>{var t;if(!i)return 0;if(w!==void 0)return w;let n=document.createElement(`div`);n.className=`${e}-scrollbar__wrap`,n.style.visibility=`hidden`,n.style.width=`100px`,n.style.position=`absolute`,n.style.top=`-9999px`,document.body.appendChild(n);let r=n.offsetWidth;n.style.overflow=`scroll`;let a=document.createElement(`div`);a.style.width=`100%`,n.appendChild(a);let o=a.offsetWidth;return(t=n.parentNode)==null||t.removeChild(n),w=r-o,w};function T(e,t){if(!i)return;if(!t){e.scrollTop=0;return}let n=[],r=t.offsetParent;for(;r!==null&&e!==r&&e.contains(r);)n.push(r),r=r.offsetParent;let a=t.offsetTop+n.reduce((e,t)=>e+t.offsetTop,0),o=a+t.offsetHeight,s=e.scrollTop,c=s+e.clientHeight;a<s?e.scrollTop=a:o>c&&(e.scrollTop=o-e.clientHeight)}var E=`focus-trap.focus-after-trapped`,D=`focus-trap.focus-after-released`,te=`focus-trap.focusout-prevented`,O={cancelable:!0,bubbles:!1},k={cancelable:!0,bubbles:!1},A=`focusAfterTrapped`,j=`focusAfterReleased`,M=Symbol(`elFocusTrap`),N=h(),P=h(0),F=h(0),I=0,L=e=>{let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t=e.tagName===`INPUT`&&e.type===`hidden`;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0||e===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},R=(e,t)=>{for(let n of e)if(!z(n,t))return n},z=(e,t)=>{if(getComputedStyle(e).visibility===`hidden`)return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display===`none`)return!0;e=e.parentElement}return!1},B=e=>{let t=L(e);return[R(t,e),R(t.reverse(),e)]},V=e=>e instanceof HTMLInputElement&&`select`in e,H=(e,t)=>{if(e){let n=document.activeElement;v(e,{preventScroll:!0}),F.value=window.performance.now(),e!==n&&V(e)&&t&&e.select()}};function U(e,t){let n=[...e],r=e.indexOf(t);return r!==-1&&n.splice(r,1),n}var ne=()=>{let e=[];return{push:t=>{let n=e[0];n&&t!==n&&n.pause(),e=U(e,t),e.unshift(t)},remove:t=>{var n,r;e=U(e,t),(r=(n=e[0])==null?void 0:n.resume)==null||r.call(n)}}},W=(e,t=!1)=>{let n=document.activeElement;for(let r of e)if(H(r,t),document.activeElement!==n)return},G=ne(),K=()=>P.value>F.value,q=()=>{N.value=`pointer`,P.value=window.performance.now()},J=()=>{N.value=`keyboard`,P.value=window.performance.now()},Y=()=>(d(()=>{I===0&&(document.addEventListener(`mousedown`,q),document.addEventListener(`touchstart`,q),document.addEventListener(`keydown`,J)),I++}),a(()=>{I--,I<=0&&(document.removeEventListener(`mousedown`,q),document.removeEventListener(`touchstart`,q),document.removeEventListener(`keydown`,J))}),{focusReason:N,lastUserFocusTimestamp:P,lastAutomatedFocusTimestamp:F}),X=e=>new CustomEvent(te,{...k,detail:e}),Z=[],Q=e=>{b(e)===y.esc&&Z.forEach(t=>t(e))},re=e=>{d(()=>{Z.length===0&&document.addEventListener(`keydown`,Q),i&&Z.push(e)}),a(()=>{Z=Z.filter(t=>t!==e),Z.length===0&&i&&document.removeEventListener(`keydown`,Q)})},ie=p({name:`ElFocusTrap`,inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:`first`}},emits:[A,j,`focusin`,`focusout`,`focusout-prevented`,`release-requested`],setup(t,{emit:n}){let r=h(),i,c,{focusReason:f}=Y();re(e=>{t.trapped&&!p.paused&&n(`release-requested`,e)});let p={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},m=e=>{if(!t.loop&&!t.trapped||p.paused)return;let{altKey:r,ctrlKey:i,metaKey:a,currentTarget:o,shiftKey:s}=e,{loop:c}=t,l=b(e)===y.tab&&!r&&!i&&!a,u=document.activeElement;if(l&&u){let t=o,[r,i]=B(t);if(!(r&&i)){if(u===t){let t=X({focusReason:f.value});n(`focusout-prevented`,t),t.defaultPrevented||e.preventDefault()}}else if(!s&&u===i){let t=X({focusReason:f.value});n(`focusout-prevented`,t),t.defaultPrevented||(e.preventDefault(),c&&H(r,!0))}else if(s&&[r,t].includes(u)){let t=X({focusReason:f.value});n(`focusout-prevented`,t),t.defaultPrevented||(e.preventDefault(),c&&H(i,!0))}}};l(M,{focusTrapRef:r,onKeydown:m}),u(()=>t.focusTrapEl,e=>{e&&(r.value=e)},{immediate:!0}),u([r],([e],[t])=>{e&&(e.addEventListener(`keydown`,m),e.addEventListener(`focusin`,x),e.addEventListener(`focusout`,S)),t&&(t.removeEventListener(`keydown`,m),t.removeEventListener(`focusin`,x),t.removeEventListener(`focusout`,S))});let g=e=>{n(A,e)},v=e=>n(j,e),x=e=>{let a=_(r);if(!a)return;let o=e.target,s=e.relatedTarget,l=o&&a.contains(o);t.trapped||s&&a.contains(s)||(i=s),l&&n(`focusin`,e),!p.paused&&t.trapped&&(l?c=o:H(c,!0))},S=i=>{let a=_(r);if(!(p.paused||!a))if(t.trapped){let r=i.relatedTarget;!e(r)&&!a.contains(r)&&setTimeout(()=>{if(!p.paused&&t.trapped){let e=X({focusReason:f.value});n(`focusout-prevented`,e),e.defaultPrevented||H(c,!0)}},0)}else{let e=i.target;e&&a.contains(e)||n(`focusout`,i)}};async function C(){await o();let e=_(r);if(e){G.push(p);let n=e.contains(document.activeElement)?i:document.activeElement;if(i=n,!e.contains(n)){let r=new Event(E,O);e.addEventListener(E,g),e.dispatchEvent(r),r.defaultPrevented||o(()=>{let r=t.focusStartEl;s(r)||(H(r),document.activeElement!==r&&(r=`first`)),r===`first`&&W(L(e),!0),(document.activeElement===n||r===`container`)&&H(e)})}}}function w(){let e=_(r);if(e){e.removeEventListener(E,g);let t=new CustomEvent(D,{...O,detail:{focusReason:f.value}});e.addEventListener(D,v),e.dispatchEvent(t),!t.defaultPrevented&&(f.value==`keyboard`||!K()||e.contains(document.activeElement))&&H(i==null?document.body:i),e.removeEventListener(D,v),G.remove(p),i=null,c=null}}return d(()=>{t.trapped&&C(),u(()=>t.trapped,e=>{e?C():w()})}),a(()=>{t.trapped&&w(),r.value&&(r.value.removeEventListener(`keydown`,m),r.value.removeEventListener(`focusin`,x),r.value.removeEventListener(`focusout`,S),r.value=void 0),i=null,c=null}),{onKeydown:m}}}),$=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n};function ae(e,t,n,r,i,a){return f(e.$slots,`default`,{handleKeydown:e.onKeydown})}var oe=$(ie,[[`render`,ae]]);export{T as a,x as c,ee as i,$ as n,C as o,M as r,S as s,oe as t};