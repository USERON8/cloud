2025-10-01 22:02:11.776 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-10-01 22:02:11.908 [main] INFO  [] com.cloud.auth.AuthApplication - Starting AuthApplication v0.0.1-SNAPSHOT using Java 17.0.14 with PID 18208 (D:\Download\Code\sofware\cloud\auth-service\target\auth-service-0.0.1-SNAPSHOT.jar started by what's up in D:\Download\Code\sofware\cloud\auth-service)
2025-10-01 22:02:11.908 [main] DEBUG [] com.cloud.auth.AuthApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-10-01 22:02:11.908 [main] INFO  [] com.cloud.auth.AuthApplication - The following 1 profile is active: "dev"
2025-10-01 22:02:11.997 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-10-01 22:02:14.112 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-01 22:02:14.116 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-01 22:02:14.150 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-10-01 22:02:14.451 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-10-01 22:02:14.462 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-10-01 22:02:14.632 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2b6cf981-2a41-3bd0-823d-0590a32b81f4
2025-10-01 22:02:16.002 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-10-01 22:02:16.029 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-10-01 22:02:16.033 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-10-01 22:02:16.033 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-10-01 22:02:16.103 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-01 22:02:16.103 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4102 ms
2025-10-01 22:02:16.293 [main] DEBUG [] o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-01 22:02:17.208 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'user-service' URL not provided. Will try picking an instance via load-balancing.
2025-10-01 22:02:17.296 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置密码编码器
2025-10-01 22:02:17.315 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ 密码编码器配置完成，默认算法: bcrypt，支持算法: [argon2, noop, pbkdf2, scrypt, bcrypt]
2025-10-01 22:02:17.474 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-10-01 22:02:18.154 [redisson-netty-1-5] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-10-01 22:02:18.324 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 24 connections initialized for localhost/127.0.0.1:6379
2025-10-01 22:02:18.550 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig - 🔧 配置OAuth2.1注册客户端仓库
2025-10-01 22:02:18.575 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig - ✅ OAuth2.1注册客户端仓库配置完成，注册客户端数量: 4
2025-10-01 22:02:18.576 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig -    - Web应用客户端: webapp-client (支持授权码+PKCE)
2025-10-01 22:02:18.579 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig -    - 移动应用客户端: mobile-client (公共客户端+PKCE)
2025-10-01 22:02:18.582 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig -    - 服务客户端: service-client (客户端凭证)
2025-10-01 22:02:18.584 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig -    - 内部服务调用客户端: client-service (内部API访问)
2025-10-01 22:02:18.588 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig - 🔧 配置OAuth2.1授权服务器设置
2025-10-01 22:02:18.593 [main] INFO  [] c.c.auth.config.OAuth21AuthorizationServerConfig - ✅ OAuth2.1授权服务器设置配置完成
2025-10-01 22:02:18.598 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - 🔧 配置Redis模板
2025-10-01 22:02:18.793 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - ✅ Redis模板配置完成
2025-10-01 22:02:18.846 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 生成OAuth2.1 RSA密钥对
2025-10-01 22:02:19.138 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ RSA密钥对生成完成
2025-10-01 22:02:19.142 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置JWK源
2025-10-01 22:02:19.169 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ JWK源配置完成，密钥ID: 0a7be113-f292-4b86-bc29-a9bab240f540
2025-10-01 22:02:19.179 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置JWT解码器
2025-10-01 22:02:19.265 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ JWT解码器配置完成（远程JWK URI）: http://localhost:8081/.well-known/jwks.json
2025-10-01 22:02:19.283 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置增强版JWT权限转换器
2025-10-01 22:02:19.284 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ 增强版JWT权限转换器配置完成
2025-10-01 22:02:19.305 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - 🔧 配置OAuth2授权服务（Redis存储）
2025-10-01 22:02:19.310 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - ✅ OAuth2授权服务配置完成
2025-10-01 22:02:19.324 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置JWT编码器
2025-10-01 22:02:19.342 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ JWT编码器配置完成
2025-10-01 22:02:19.352 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置OAuth2.1令牌生成器
2025-10-01 22:02:19.365 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ OAuth2.1令牌生成器配置完成
2025-10-01 22:02:19.504 [main] INFO  [] com.cloud.common.cache.config.CacheConfigFactory - 🔧 启用标准Redis缓存管理器: ttl=1800s, nullValues=false
2025-10-01 22:02:19.558 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-10-01 22:02:19.593 [main] INFO  [] com.cloud.common.config.SecurityConfig - 🔐 初始化Cloud平台统一安全权限配置
2025-10-01 22:02:19.595 [main] INFO  [] com.cloud.common.config.SecurityConfig - ✓ 启用方法级权限控制(@PreAuthorize, @PostAuthorize, @Secured, @RolesAllowed)
2025-10-01 22:02:19.595 [main] INFO  [] com.cloud.common.config.SecurityConfig - ✓ 集成OAuth2.1 JWT权限验证
2025-10-01 22:02:19.595 [main] INFO  [] com.cloud.common.config.SecurityConfig - ✓ 提供统一的权限工具类和管理器
2025-10-01 22:02:19.608 [main] INFO  [] com.cloud.common.config.RedisConfig - 🔧 初始化StringRedisTemplate配置
2025-10-01 22:02:19.608 [main] INFO  [] com.cloud.common.config.RedisConfig - ✅ StringRedisTemplate配置完成
2025-10-01 22:02:19.675 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ 认证异步线程池初始化完成 - 核心线程数: 3, 最大线程数: 8, 队列容量: 300
2025-10-01 22:02:19.697 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ Token处理线程池初始化完成
2025-10-01 22:02:19.710 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ 安全日志线程池初始化完成 - 核心线程数: 2, 最大线程数: 6, 队列容量: 500
2025-10-01 22:02:19.720 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ OAuth2处理线程池初始化完成
2025-10-01 22:02:19.736 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ 用户会话管理线程池初始化完成 - 核心线程数: 2, 最大线程数: 5, 队列容量: 200
2025-10-01 22:02:19.750 [main] INFO  [] com.cloud.auth.config.AuthAsyncConfig - ✅ 认证服务通用异步线程池初始化完成
2025-10-01 22:02:19.764 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - 🔧 配置DAO认证提供者
2025-10-01 22:02:19.786 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - ✅ DAO认证提供者配置完成
2025-10-01 22:02:19.816 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - 🔧 配置认证管理器
2025-10-01 22:02:19.866 [main] INFO  [] o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name daoAuthenticationProvider
2025-10-01 22:02:19.870 [main] WARN  [] o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-10-01 22:02:19.876 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - ✅ 认证管理器配置完成
2025-10-01 22:02:19.878 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - 🔧 配置用户详情服务验证器
2025-10-01 22:02:19.880 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - 🔍 验证用户详情服务配置
2025-10-01 22:02:19.880 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - ✅ 用户详情服务配置验证通过
2025-10-01 22:02:19.882 [main] INFO  [] c.cloud.auth.config.AuthenticationProviderConfig - 🔧 配置认证事件监听器
2025-10-01 22:02:19.892 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - 🔧 配置JWT权限转换器
2025-10-01 22:02:19.892 [main] INFO  [] com.cloud.auth.config.JwtPasswordConfig - ✅ JWT权限转换器配置完成
2025-10-01 22:02:19.894 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - 🔧 配置OAuth2同意服务（Redis存储）
2025-10-01 22:02:19.896 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - ✅ OAuth2同意服务配置完成
2025-10-01 22:02:19.900 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - 🔧 配置OAuth2专用Redis模板
2025-10-01 22:02:19.902 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - ✅ OAuth2专用Redis模板配置完成
2025-10-01 22:02:19.912 [main] INFO  [] com.cloud.auth.config.RedisOAuth2Config - 🔧 配置Redis健康检查器
2025-10-01 22:02:20.122 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - 🔧 配置OAuth2.1授权服务器安全过滤器链
2025-10-01 22:02:20.397 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 28 mappings in 'requestMappingHandlerMapping'
2025-10-01 22:02:20.534 [main] DEBUG [] o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-01 22:02:20.884 [main] INFO  [] o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 2 endpoints beneath base path '/actuator'
2025-10-01 22:02:21.018 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - ✅ OAuth2.1授权服务器安全过滤器链配置完成
2025-10-01 22:02:21.346 [main] DEBUG [] o.s.security.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/oauth2/**'], Mvc [pattern='/.well-known/**'], Mvc [pattern='/connect/**'], Mvc [pattern='/userinfo']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, AuthorizationServerContextFilter, HeaderWriterFilter, CorsFilter, CsrfFilter, OidcLogoutEndpointFilter, LogoutFilter, OAuth2AuthorizationServerMetadataEndpointFilter, OAuth2AuthorizationEndpointFilter, OAuth2DeviceVerificationEndpointFilter, OidcProviderConfigurationEndpointFilter, NimbusJwkSetEndpointFilter, OAuth2ClientAuthenticationFilter, UsernamePasswordAuthenticationFilter, DefaultResourcesFilter, DefaultLoginPageGeneratingFilter, DefaultLogoutPageGeneratingFilter, ConcurrentSessionFilter, BearerTokenAuthenticationFilter, BasicAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter, OAuth2TokenEndpointFilter, OAuth2TokenIntrospectionEndpointFilter, OAuth2TokenRevocationEndpointFilter, OAuth2DeviceAuthorizationEndpointFilter, OidcUserInfoEndpointFilter
2025-10-01 22:02:21.346 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - 🔧 配置OAuth2.1资源服务器安全过滤器链
2025-10-01 22:02:21.362 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - ✅ OAuth2.1资源服务器安全过滤器链配置完成
2025-10-01 22:02:21.377 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - 🔧 配置CORS跨域设置
2025-10-01 22:02:21.378 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - ✅ CORS跨域设置配置完成
2025-10-01 22:02:21.384 [main] DEBUG [] o.s.security.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/auth/validate-token'], Mvc [pattern='/auth/refresh-token'], Mvc [pattern='/admin/**'], Mvc [pattern='/management/**']] with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-01 22:02:21.386 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - 🔧 配置默认安全过滤器链
2025-10-01 22:02:21.422 [main] INFO  [] com.cloud.auth.config.SecurityFilterChainConfig - ✅ 默认安全过滤器链配置完成
2025-10-01 22:02:21.436 [main] DEBUG [] o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-01 22:02:21.444 [main] INFO  [] com.cloud.common.config.RocketMQConfig - ✅ RocketMQ配置已加载
2025-10-01 22:02:21.524 [main] INFO  [] com.cloud.common.config.SecurityConfig - 注册统一权限表达式对象
2025-10-01 22:02:21.643 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 2 ResponseBodyAdvice
2025-10-01 22:02:21.768 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 4 @ExceptionHandler, 2 ResponseBodyAdvice
2025-10-01 22:02:23.509 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-10-01 22:02:23.509 [main] INFO  [] o.s.integration.channel.PublishSubscribeChannel - Channel 'auth-service.errorChannel' has 1 subscriber(s).
2025-10-01 22:02:23.509 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - started bean '_org.springframework.integration.errorLogger'
2025-10-01 22:02:23.511 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-10-01 22:02:23.526 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/'
2025-10-01 22:02:23.690 [main] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP auth-service 192.168.43.122:8081 register finished
2025-10-01 22:02:24.028 [main] INFO  [] com.cloud.auth.AuthApplication - Started AuthApplication in 15.116 seconds (process running for 15.947)
2025-10-01 22:02:24.034 [main] INFO  [] com.cloud.common.cache.warmup.CacheWarmupManager - 未配置缓存预热策略，跳过预热
2025-10-01 22:02:24.059 [main] INFO  [] c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common, group=DEFAULT_GROUP
2025-10-01 22:02:24.062 [main] INFO  [] com.cloud.auth.AuthApplication - 认证服务启动完成！
