2025-09-28 18:58:26.181 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-28 18:58:26.259 [main] INFO  [] com.cloud.stock.StockApplication - Starting StockApplication v0.0.1-SNAPSHOT using Java 17.0.14 with PID 29756 (D:\Download\Code\sofware\cloud\stock-service\target\stock-service-0.0.1-SNAPSHOT.jar started by what's up in D:\Download\Code\sofware\cloud\stock-service)
2025-09-28 18:58:26.260 [main] DEBUG [] com.cloud.stock.StockApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-28 18:58:26.260 [main] INFO  [] com.cloud.stock.StockApplication - The following 1 profile is active: "dev"
2025-09-28 18:58:26.334 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-28 18:58:27.810 [main] INFO  [] o.s.b.factory.support.DefaultListableBeanFactory - Overriding bean definition for bean 'securityFilterChain' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=resourceServerConfig; factoryMethodName=securityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/stock/config/ResourceServerConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=serviceOAuth2ConfigExample; factoryMethodName=securityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/common/config/base/example/ServiceOAuth2ConfigExample.class]]
2025-09-28 18:58:27.880 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-28 18:58:27.880 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-28 18:58:27.880 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-28 18:58:27.881 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-28 18:58:27.882 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-28 18:58:27.883 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-28 18:58:27.883 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-28 18:58:28.104 [main] INFO  [] o.s.b.factory.support.DefaultListableBeanFactory - Overriding bean definition for bean 'redisCacheManager' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=cacheConfigFactory; factoryMethodName=redisCacheManager; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/common/cache/config/CacheConfigFactory.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=com.cloud.common.config.RedisConfig; factoryMethodName=redisCacheManager; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/common/config/RedisConfig.class]]
2025-09-28 18:58:28.765 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28 18:58:28.770 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28 18:58:28.817 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-09-28 18:58:29.141 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-28 18:58:29.153 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-28 18:58:29.397 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=24be43ac-93c2-36e3-9ba0-5d05d325bb7e
2025-09-28 18:58:30.963 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8085 (http)
2025-09-28 18:58:30.984 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8085"]
2025-09-28 18:58:30.986 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-28 18:58:30.986 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-28 18:58:31.043 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-28 18:58:31.043 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4706 ms
2025-09-28 18:58:31.396 [main] DEBUG [] o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-28 18:58:31.450 [main] INFO  [] com.cloud.stock.config.StockMessageConfig - âœ… åº“å­˜æœåŠ¡æ¶ˆæ¯é…ç½®å·²åŠ è½½ - RocketMQé›†æˆå¯ç”¨
2025-09-28 18:58:31.550 [main] INFO  [] com.cloud.common.config.MybatisPlusConfig - åˆå§‹åŒ–MyBatis Plusç»Ÿä¸€æ‹¦æˆªå™¨é…ç½®
2025-09-28 18:58:31.782 [main] INFO  [] com.cloud.common.config.MybatisPlusConfig - åˆå§‹åŒ–MyBatis Plusç»Ÿä¸€å…ƒæ•°æ®å¤„ç†å™¨
2025-09-28 18:58:34.112 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-28 18:58:34.805 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-28 18:58:34.914 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 24 connections initialized for localhost/127.0.0.1:6379
2025-09-28 18:58:35.000 [main] INFO  [] com.cloud.common.config.RedisConfig - ğŸ”§ åˆå§‹åŒ–StringRedisTemplateé…ç½®
2025-09-28 18:58:35.124 [main] INFO  [] com.cloud.common.config.RedisConfig - âœ… StringRedisTemplateé…ç½®å®Œæˆ
2025-09-28 18:58:35.273 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'cacheMessageListener' defined in URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/common-module-0.0.1-SNAPSHOT.jar!/com/cloud/common/cache/listener/CacheMessageListener.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.cloud.common.cache.core.MultiLevelCacheManager' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-09-28 18:58:35.306 [main] INFO  [] org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-28 18:58:35.407 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-28 18:58:35.441 [main] ERROR [] o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.cloud.common.cache.listener.CacheMessageListener required a bean of type 'com.cloud.common.cache.core.MultiLevelCacheManager' that could not be found.


Action:

Consider defining a bean of type 'com.cloud.common.cache.core.MultiLevelCacheManager' in your configuration.

2025-09-28 20:18:13.086 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-28 20:18:13.140 [main] INFO  [] com.cloud.stock.StockApplication - Starting StockApplication v0.0.1-SNAPSHOT using Java 17.0.14 with PID 41308 (D:\Download\Code\sofware\cloud\stock-service\target\stock-service-0.0.1-SNAPSHOT.jar started by what's up in D:\Download\Code\sofware\cloud\stock-service)
2025-09-28 20:18:13.142 [main] DEBUG [] com.cloud.stock.StockApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-28 20:18:13.143 [main] INFO  [] com.cloud.stock.StockApplication - The following 1 profile is active: "dev"
2025-09-28 20:18:13.200 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-28 20:18:14.377 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.support.BeanDefinitionOverrideException: Invalid bean definition with name 'securityFilterChain' defined in class path resource [com/cloud/common/config/base/example/ServiceOAuth2ConfigExample.class]: Cannot register bean definition [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=serviceOAuth2ConfigExample; factoryMethodName=securityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/common/config/base/example/ServiceOAuth2ConfigExample.class]] for bean 'securityFilterChain' since there is already [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=resourceServerConfig; factoryMethodName=securityFilterChain; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/stock/config/ResourceServerConfig.class]] bound.
2025-09-28 20:18:14.394 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-28 20:18:14.421 [main] ERROR [] o.s.b.diagnostics.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The bean 'securityFilterChain', defined in class path resource [com/cloud/common/config/base/example/ServiceOAuth2ConfigExample.class], could not be registered. A bean with that name has already been defined in class path resource [com/cloud/stock/config/ResourceServerConfig.class] and overriding is disabled.

Action:

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true

2025-09-28 20:22:42.767 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-28 20:22:42.857 [main] INFO  [] com.cloud.stock.StockApplication - Starting StockApplication v0.0.1-SNAPSHOT using Java 17.0.14 with PID 42284 (D:\Download\Code\sofware\cloud\stock-service\target\stock-service-0.0.1-SNAPSHOT.jar started by what's up in D:\Download\Code\sofware\cloud\stock-service)
2025-09-28 20:22:42.858 [main] DEBUG [] com.cloud.stock.StockApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-28 20:22:42.859 [main] INFO  [] com.cloud.stock.StockApplication - The following 1 profile is active: "dev"
2025-09-28 20:22:42.923 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-28 20:22:44.248 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-28 20:22:44.248 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-28 20:22:44.248 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-28 20:22:44.249 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-28 20:22:44.250 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-28 20:22:44.250 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-28 20:22:44.250 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:nested:/D:/Download/Code/sofware/cloud/stock-service/target/stock-service-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-28 20:22:44.951 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28 20:22:44.957 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28 20:22:44.995 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-09-28 20:22:45.272 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-28 20:22:45.283 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-28 20:22:45.500 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=963a9bce-aa25-3666-8066-d012ab7204c0
2025-09-28 20:22:47.023 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8085 (http)
2025-09-28 20:22:47.056 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8085"]
2025-09-28 20:22:47.058 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-28 20:22:47.059 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-28 20:22:47.124 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-28 20:22:47.124 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4197 ms
2025-09-28 20:22:47.492 [main] DEBUG [] o.s.web.filter.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-09-28 20:22:47.540 [main] INFO  [] com.cloud.stock.config.StockMessageConfig - âœ… åº“å­˜æœåŠ¡æ¶ˆæ¯é…ç½®å·²åŠ è½½ - RocketMQé›†æˆå¯ç”¨
2025-09-28 20:22:47.643 [main] INFO  [] com.cloud.common.config.MybatisPlusConfig - åˆå§‹åŒ–MyBatis Plusç»Ÿä¸€æ‹¦æˆªå™¨é…ç½®
2025-09-28 20:22:47.828 [main] INFO  [] com.cloud.common.config.MybatisPlusConfig - åˆå§‹åŒ–MyBatis Plusç»Ÿä¸€å…ƒæ•°æ®å¤„ç†å™¨
2025-09-28 20:22:49.524 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-28 20:22:50.120 [redisson-netty-1-6] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-28 20:22:50.226 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 24 connections initialized for localhost/127.0.0.1:6379
2025-09-28 20:22:50.330 [main] INFO  [] com.cloud.common.config.RedisConfig - ğŸ”§ åˆå§‹åŒ–StringRedisTemplateé…ç½®
2025-09-28 20:22:50.403 [main] INFO  [] com.cloud.common.config.RedisConfig - âœ… StringRedisTemplateé…ç½®å®Œæˆ
2025-09-28 20:22:50.513 [main] INFO  [] com.cloud.common.cache.config.CacheConfigFactory - ğŸ”§ å¯ç”¨æ ‡å‡†Redisç¼“å­˜ç®¡ç†å™¨: ttl=1800s, nullValues=false
2025-09-28 20:22:50.532 [main] INFO  [] c.cloud.common.cache.metrics.CacheMetricsCollector - åˆå§‹åŒ–ç¼“å­˜ç›‘æ§æŒ‡æ ‡...
2025-09-28 20:22:50.546 [main] INFO  [] c.cloud.common.cache.metrics.CacheMetricsCollector - ç¼“å­˜ç›‘æ§æŒ‡æ ‡åˆå§‹åŒ–å®Œæˆ
2025-09-28 20:22:50.566 [main] INFO  [] com.cloud.common.config.PermissionConfig - æƒé™é…ç½®åˆå§‹åŒ–å®Œæˆï¼Œç”¨æˆ·ç±»å‹æ•°é‡: 3, è§’è‰²æ•°é‡: 3
2025-09-28 20:22:50.585 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - ğŸ” åˆå§‹åŒ–Cloudå¹³å°ç»Ÿä¸€å®‰å…¨æƒé™é…ç½®
2025-09-28 20:22:50.585 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - âœ“ å¯ç”¨æ–¹æ³•çº§æƒé™æ§åˆ¶(@PreAuthorize, @PostAuthorize, @Secured, @RolesAllowed)
2025-09-28 20:22:50.585 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - âœ“ å¯ç”¨è‡ªå®šä¹‰æƒé™æ³¨è§£(@RequireScope, @RequireUserType, @RequireAuthentication)
2025-09-28 20:22:50.586 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - âœ“ é›†æˆOAuth2.1 JWTæƒé™éªŒè¯
2025-09-28 20:22:50.586 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - âœ“ æä¾›ç»Ÿä¸€çš„æƒé™å·¥å…·ç±»å’Œç®¡ç†å™¨
2025-09-28 20:22:50.609 [main] INFO  [] com.cloud.common.config.RedisConfig - ğŸ”§ åˆå§‹åŒ–ç»Ÿä¸€RedisTemplateé…ç½®
2025-09-28 20:22:50.609 [main] INFO  [] com.cloud.common.config.RedisConfig - âœ… RedisTemplateé…ç½®å®Œæˆ
2025-09-28 20:22:50.985 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerMapping - 24 mappings in 'requestMappingHandlerMapping'
2025-09-28 20:22:51.109 [main] DEBUG [] o.s.web.servlet.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-09-28 20:22:51.375 [main] INFO  [] o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-09-28 20:22:51.427 [main] DEBUG [] o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-09-28 20:22:51.620 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - âœ… JWTè§£ç å™¨é…ç½®å®Œæˆï¼ŒéªŒè¯å™¨æ•°é‡: 1
2025-09-28 20:22:51.690 [main] DEBUG [] o.s.security.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, BearerTokenAuthenticationFilter, AuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-09-28 20:22:51.690 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - âœ… åº“å­˜æœåŠ¡ OAuth2èµ„æºæœåŠ¡å™¨é…ç½®å®Œæˆ
2025-09-28 20:22:51.690 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWTéªŒè¯ç«¯ç‚¹: http://127.0.0.1:80/.well-known/jwks.json
2025-09-28 20:22:51.690 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWTç¼“å­˜æ—¶é—´: PT30M
2025-09-28 20:22:51.690 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWTå‘è¡Œè€…: http://localhost:8080
2025-09-28 20:22:51.691 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - ç»Ÿä¸€æƒé™ç®¡ç†: æœªå¯ç”¨ï¼ˆä»…ä½¿ç”¨æ ‡å‡†OAuth2æƒé™ï¼‰
2025-09-28 20:22:51.770 [main] INFO  [] com.cloud.stock.config.StockAsyncConfig - åº“å­˜æŸ¥è¯¢çº¿ç¨‹æ± åˆå§‹åŒ–å®Œæˆ
2025-09-28 20:22:51.780 [main] INFO  [] com.cloud.stock.config.StockAsyncConfig - åº“å­˜æ“ä½œçº¿ç¨‹æ± åˆå§‹åŒ–å®Œæˆ
2025-09-28 20:22:51.784 [main] INFO  [] com.cloud.stock.config.StockAsyncConfig - åº“å­˜æœåŠ¡é€šç”¨å¼‚æ­¥çº¿ç¨‹æ± åˆå§‹åŒ–å®Œæˆ
2025-09-28 20:22:51.823 [main] INFO  [] com.cloud.common.config.RocketMQConfig - âœ… RocketMQé…ç½®å·²åŠ è½½
2025-09-28 20:22:51.825 [main] INFO  [] com.cloud.common.config.UnifiedSecurityConfig - æ³¨å†Œç»Ÿä¸€æƒé™è¡¨è¾¾å¼å¯¹è±¡
2025-09-28 20:22:51.830 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.836 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.837 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.840 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.842 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.844 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.846 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-28 20:22:51.994 [main] DEBUG [] o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 2 ResponseBodyAdvice
2025-09-28 20:22:52.066 [main] DEBUG [] o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 4 @ExceptionHandler, 2 ResponseBodyAdvice
2025-09-28 20:22:52.345 [main] INFO  [] c.b.m.e.spring.MybatisPlusApplicationContextAware - Register ApplicationContext instances org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@2152ab30
2025-09-28 20:22:52.714 [main] WARN  [] o.s.c.f.c.catalog.BeanFactoryAwareFunctionRegistry - Multiple functional beans were found [stockOrderCompletedMessageConsumer, stockReserveMessageConsumer, stockRollbackMessageConsumer, stockOrderCreatedMessageConsumer, stockConfirmMessageConsumer], thus can't determine default function definition. Please use 'spring.cloud.function.definition' property to explicitly define it. 
2025-09-28 20:22:53.468 [main] WARN  [] o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-09-28 20:22:53.697 [main] INFO  [] com.cloud.common.monitoring.PerformanceMonitor - æ€§èƒ½ç›‘æ§æŒ‡æ ‡å·²æ³¨å†Œåˆ°MeterRegistry
2025-09-28 20:22:53.730 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-09-28 20:22:53.731 [main] INFO  [] o.s.integration.channel.PublishSubscribeChannel - Channel 'stock-service.errorChannel' has 1 subscriber(s).
2025-09-28 20:22:53.732 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - started bean '_org.springframework.integration.errorLogger'
2025-09-28 20:22:53.733 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8085"]
2025-09-28 20:22:53.742 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8085 (http) with context path '/'
2025-09-28 20:22:53.855 [main] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP stock-service 192.168.43.181:8085 register finished
2025-09-28 20:22:54.052 [main] INFO  [] com.cloud.stock.StockApplication - Started StockApplication in 13.528 seconds (process running for 14.09)
2025-09-28 20:22:54.084 [main] INFO  [] com.cloud.common.cache.warmup.CacheWarmupManager - æœªé…ç½®ç¼“å­˜é¢„çƒ­ç­–ç•¥ï¼Œè·³è¿‡é¢„çƒ­
2025-09-28 20:22:54.092 [main] INFO  [] c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common, group=DEFAULT_GROUP
2025-09-28 20:22:54.093 [main] INFO  [] com.cloud.stock.StockApplication - åº“å­˜æœåŠ¡å¯åŠ¨å®Œæˆï¼
2025-09-28 20:24:53.701 [pool-5-thread-1] WARN  [] io.micrometer.core.instrument.MeterRegistry - This Gauge has been already registered (MeterId{name='jvm.memory.used', tags=[tag(platform=cloud-microservices),tag(profile=dev),tag(service=stock-service)]}), the registration will be ignored. Note that subsequent logs will be logged at debug level.
2025-09-28 20:31:01.363 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.client.naming.event.InstancesChangeEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.common.ability.AbstractAbilityControlManager$AbilityUpdateEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.361 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 20:31:01.369 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-09-28 20:31:01.372 [SpringApplicationShutdownHook] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
	at com.alibaba.nacos.common.notify.NotifyCenter.deregisterSubscriber(NotifyCenter.java:242)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.shutdown(NamingGrpcClientProxy.java:537)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.shutdown(NamingClientProxyDelegate.java:212)
	at com.alibaba.nacos.client.naming.NacosNamingService.shutDown(NacosNamingService.java:637)
	at com.alibaba.cloud.nacos.NacosServiceManager.nacosServiceShutDown(NacosServiceManager.java:117)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.close(NacosServiceRegistry.java:120)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.stop(AbstractAutoServiceRegistration.java:311)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.onContextClosedEvent(NacosAutoServiceRegistration.java:122)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:382)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:254)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:173)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-28 20:31:01.376 [SpringApplicationShutdownHook] INFO  [] o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-28 20:31:01.410 [tomcat-shutdown] INFO  [] o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-28 20:31:01.412 [SpringApplicationShutdownHook] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - Removing {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-09-28 20:31:01.412 [SpringApplicationShutdownHook] INFO  [] o.s.integration.channel.PublishSubscribeChannel - Channel 'stock-service.errorChannel' has 0 subscriber(s).
2025-09-28 20:31:01.412 [SpringApplicationShutdownHook] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - stopped bean '_org.springframework.integration.errorLogger'
2025-09-28 20:31:01.423 [SpringApplicationShutdownHook] WARN  [] o.s.beans.factory.support.DisposableBeanAdapter - Custom destroy method 'close' on bean with name 'nacosServiceRegistry' propagated an exception: java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
