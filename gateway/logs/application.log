2025-09-28 17:42:58.147 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-28 17:42:58.224 [main] INFO  [] com.cloud.gateway.GatewayApplication - Starting GatewayApplication v0.0.1-SNAPSHOT using Java 17.0.14 with PID 50112 (D:\Download\Code\sofware\cloud\gateway\target\gateway-0.0.1-SNAPSHOT.jar started by what's up in D:\Download\Code\sofware\cloud\gateway)
2025-09-28 17:42:58.226 [main] DEBUG [] com.cloud.gateway.GatewayApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-28 17:42:58.227 [main] INFO  [] com.cloud.gateway.GatewayApplication - The following 3 profiles are active: "route", "api", "dev"
2025-09-28 17:42:58.298 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-28 17:42:59.559 [main] INFO  [] o.s.b.factory.support.DefaultListableBeanFactory - Overriding bean definition for bean 'discoveryLocatorProperties' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=gatewayDiscoveryConfig; factoryMethodName=discoveryLocatorProperties; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/cloud/gateway/config/GatewayDiscoveryConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=org.springframework.cloud.gateway.discovery.GatewayDiscoveryClientAutoConfiguration; factoryMethodName=discoveryLocatorProperties; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [org/springframework/cloud/gateway/discovery/GatewayDiscoveryClientAutoConfiguration.class]]
2025-09-28 17:43:00.091 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-28 17:43:00.099 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-28 17:43:00.181 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 0 Redis repository interfaces.
2025-09-28 17:43:00.596 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=2a3e0f98-4ffb-3a1c-ad50-0bdfcbac858b
2025-09-28 17:43:01.205 [main] INFO  [] com.cloud.gateway.config.GatewayAsyncConfig - ✅ 网关监控线程池初始化完成 - 核心线程数: 1, 最大线程数: 3, 队列容量: 100
2025-09-28 17:43:01.206 [main] INFO  [] com.cloud.gateway.config.GatewayAsyncConfig - ✅ 网关监控线程池配置完成 - 核心线程数: 1, 最大线程数: 2, 队列容量: 50
2025-09-28 17:43:01.214 [main] INFO  [] com.cloud.gateway.config.GatewayAsyncConfig - ✅ 网关日志线程池配置完成 - 核心线程数: 2, 最大线程数: 4, 队列容量: 1000
2025-09-28 17:43:01.216 [main] INFO  [] com.cloud.gateway.config.GatewayAsyncConfig - ✅ 网关统计线程池配置完成 - 核心线程数: 1, 最大线程数: 3, 队列容量: 2000
2025-09-28 17:43:01.334 [main] INFO  [] com.cloud.gateway.config.GatewayAsyncConfig - ✅ 网关路由线程池初始化完成 - 核心线程数: 12, 最大线程数: 48, 队列容量: 500
2025-09-28 17:43:02.206 [main] INFO  [] c.cloud.gateway.config.OAuth2ResourceServerConfig - 🔧 配置网关安全过滤器链，测试API开放状态: true
2025-09-28 17:43:02.362 [main] DEBUG [] o.s.w.r.r.m.a.RequestMappingHandlerMapping - 1 mappings in 'requestMappingHandlerMapping'
2025-09-28 17:43:02.381 [main] WARN  [] c.cloud.gateway.config.OAuth2ResourceServerConfig - ⚠️ 测试API已开放，生产环境请关闭此配置
2025-09-28 17:43:02.397 [main] INFO  [] c.cloud.gateway.config.OAuth2ResourceServerConfig - 配置JWT解码器，JWK端点: http://127.0.0.1:8081/.well-known/jwks.json
2025-09-28 17:43:06.176 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [After]
2025-09-28 17:43:06.181 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Before]
2025-09-28 17:43:06.182 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Between]
2025-09-28 17:43:06.182 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Cookie]
2025-09-28 17:43:06.183 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Header]
2025-09-28 17:43:06.184 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Host]
2025-09-28 17:43:06.185 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Method]
2025-09-28 17:43:06.186 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Path]
2025-09-28 17:43:06.188 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Query]
2025-09-28 17:43:06.189 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [ReadBody]
2025-09-28 17:43:06.190 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [RemoteAddr]
2025-09-28 17:43:06.191 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2025-09-28 17:43:06.192 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [Weight]
2025-09-28 17:43:06.192 [main] INFO  [] o.s.c.gateway.route.RouteDefinitionRouteLocator - Loaded RoutePredicateFactory [CloudFoundryRouteService]
2025-09-28 17:43:06.324 [main] DEBUG [] o.s.web.reactive.handler.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-28 17:43:06.693 [main] INFO  [] o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 4 endpoints beneath base path '/actuator'
2025-09-28 17:43:06.804 [main] DEBUG [] o.s.w.r.r.m.annotation.ControllerMethodResolver - ControllerAdvice beans: none
2025-09-28 17:43:06.888 [main] DEBUG [] o.s.web.server.adapter.HttpWebHandlerAdapter - enableLoggingRequestDetails='false': form data and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-28 17:43:07.331 [main] WARN  [] o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-09-28 17:43:07.636 [main] INFO  [] o.s.boot.web.embedded.netty.NettyWebServer - Netty started on port 80 (http)
2025-09-28 17:43:08.716 [main] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP gateway 192.168.43.181:80 register finished
2025-09-28 17:43:08.888 [boundedElastic-3] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying {pattern=/gateway/**} to Path
2025-09-28 17:43:08.888 [boundedElastic-4] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying {pattern=/gateway/**} to Path
2025-09-28 17:43:08.928 [boundedElastic-4] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying filter {regexp=/gateway/?(?<remaining>.*), replacement=/${remaining}} to RewritePath
2025-09-28 17:43:08.930 [boundedElastic-3] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying filter {regexp=/gateway/?(?<remaining>.*), replacement=/${remaining}} to RewritePath
2025-09-28 17:43:08.969 [boundedElastic-4] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition matched: ReactiveCompositeDiscoveryClient_gateway
2025-09-28 17:43:08.975 [boundedElastic-3] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition matched: ReactiveCompositeDiscoveryClient_gateway
2025-09-28 17:43:09.014 [boundedElastic-3] DEBUG [] o.s.cloud.gateway.filter.GatewayMetricsFilter - New routes count: 1
2025-09-28 17:43:09.096 [boundedElastic-1] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying {pattern=/gateway/**} to Path
2025-09-28 17:43:09.108 [boundedElastic-1] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition ReactiveCompositeDiscoveryClient_gateway applying filter {regexp=/gateway/?(?<remaining>.*), replacement=/${remaining}} to RewritePath
2025-09-28 17:43:09.114 [boundedElastic-3] DEBUG [] o.s.cloud.gateway.filter.GatewayMetricsFilter - New routes count: 1
2025-09-28 17:43:09.123 [boundedElastic-1] DEBUG [] o.s.c.gateway.route.RouteDefinitionRouteLocator - RouteDefinition matched: ReactiveCompositeDiscoveryClient_gateway
2025-09-28 17:43:09.135 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor - 🔍 网关系统监控报告:
2025-09-28 17:43:09.141 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor -   📊 系统资源 - CPU: {:.1f}%, 内存: {:.1f}% (0.0/0.5399210613642431MB), 运行时间: 66分钟
2025-09-28 17:43:09.145 [main] INFO  [] com.cloud.gateway.GatewayApplication - Started GatewayApplication in 14.222 seconds (process running for 14.955)
2025-09-28 17:43:09.143 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor -   🧵 网关线程池状态:
2025-09-28 17:43:09.149 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor -     🔹 监控 - 活跃: 0/3 ({:.1f}%), 队列: 0.0/0 ({:.1f}%), 完成率: {:.1f}%
2025-09-28 17:43:09.161 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor -     🔹 日志 - 活跃: 0/4 ({:.1f}%), 队列: 0.0/0 ({:.1f}%), 完成率: {:.1f}%
2025-09-28 17:43:09.170 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor -     🔹 统计 - 活跃: 0/3 ({:.1f}%), 队列: 0.0/0 ({:.1f}%), 完成率: {:.1f}%
2025-09-28 17:43:09.180 [scheduling-1] INFO  [] com.cloud.gateway.monitor.SystemMonitor - 🔍 网关系统监控报告结束
2025-09-28 17:43:09.195 [main] INFO  [] c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common, group=DEFAULT_GROUP
2025-09-28 17:43:09.240 [main] INFO  [] com.cloud.gateway.GatewayApplication - 网关服务启动完成！
2025-09-28 17:43:09.245 [main] INFO  [] com.cloud.gateway.GatewayApplication - 
 -------------------------------------------------
     Application is running! Access URLs:
     Local:    http://localhost
 -------------------------------------------------


2025-09-28 17:49:53.401 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.client.naming.event.InstancesChangeEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.399 [nacos.publisher-com.alibaba.nacos.common.ability.AbstractAbilityControlManager$AbilityUpdateEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-28 17:49:53.411 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-09-28 17:49:53.417 [SpringApplicationShutdownHook] WARN  [] o.s.b.w.r.c.AnnotationConfigReactiveWebServerApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
	at com.alibaba.nacos.common.notify.NotifyCenter.deregisterSubscriber(NotifyCenter.java:242)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.shutdown(NamingGrpcClientProxy.java:537)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.shutdown(NamingClientProxyDelegate.java:212)
	at com.alibaba.nacos.client.naming.NacosNamingService.shutDown(NacosNamingService.java:637)
	at com.alibaba.cloud.nacos.NacosServiceManager.nacosServiceShutDown(NacosServiceManager.java:117)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.close(NacosServiceRegistry.java:120)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.stop(AbstractAutoServiceRegistration.java:311)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.onContextClosedEvent(NacosAutoServiceRegistration.java:122)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:382)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:254)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:173)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.doClose(ReactiveWebServerApplicationContext.java:155)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-28 17:49:53.421 [SpringApplicationShutdownHook] INFO  [] o.s.boot.web.embedded.netty.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-28 17:49:53.426 [netty-shutdown] INFO  [] o.s.boot.web.embedded.netty.GracefulShutdown - Graceful shutdown complete
2025-09-28 17:49:55.454 [SpringApplicationShutdownHook] WARN  [] o.s.beans.factory.support.DisposableBeanAdapter - Custom destroy method 'close' on bean with name 'nacosServiceRegistry' propagated an exception: java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
