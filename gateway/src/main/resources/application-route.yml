spring:
  cloud:
    gateway:
      routes:
        # ========================================
        # 认证服务 (auth-service) - 优先级: 10
        # ========================================
        
        # OAuth2.1标准端点
        - id: oauth2-endpoints
          uri: lb://auth-service
          order: 10
          predicates:
            - Path=/oauth2/**
          filters:
            - PreserveHostHeader
        
        # OpenID Connect和Well-Known端点
        - id: oidc-endpoints
          uri: lb://auth-service
          order: 10
          predicates:
            - Path=/.well-known/**,/connect/**,/userinfo
          filters:
            - PreserveHostHeader
        
        # 认证服务API
        - id: auth-service-api
          uri: lb://auth-service
          order: 10
          predicates:
            - Path=/auth/**
        
        # ========================================
        # 用户服务 (user-service) - 优先级: 20
        # ========================================
        
        # 用户管理
        - id: user-management
          uri: lb://user-service
          order: 20
          predicates:
            - Path=/users/**
        
        # 商家管理
        - id: merchant-management
          uri: lb://user-service
          order: 20
          predicates:
            - Path=/merchant/**
        
        # 管理后台
        - id: admin-management
          uri: lb://user-service
          order: 20
          predicates:
            - Path=/admin/**
        
        # ========================================
        # 商品服务 (product-service) - 优先级: 20
        # ========================================
        
        # 商品管理
        - id: product-management
          uri: lb://product-service
          order: 20
          predicates:
            - Path=/product/**
        
        # 分类管理
        - id: category-management
          uri: lb://product-service
          order: 20
          predicates:
            - Path=/category/**
        
        # 品牌管理（如果需要）
        - id: brand-management
          uri: lb://product-service
          order: 20
          predicates:
            - Path=/brand/**
        
        # ========================================
        # 订单服务 (order-service) - 优先级: 20
        # ========================================
        
        # 订单管理
        - id: order-management
          uri: lb://order-service
          order: 20
          predicates:
            - Path=/order/**
        
        # 购物车管理
        - id: cart-management
          uri: lb://order-service
          order: 20
          predicates:
            - Path=/cart/**
        
        # ========================================
        # 支付服务 (payment-service) - 优先级: 20
        # ========================================
        
        # 支付管理
        - id: payment-management
          uri: lb://payment-service
          order: 20
          predicates:
            - Path=/payment/**
        
        # ========================================
        # 库存服务 (stock-service) - 优先级: 20  
        # ========================================
        
        # 库存管理
        - id: stock-management
          uri: lb://stock-service
          order: 20
          predicates:
            - Path=/stock/**
        
        # ========================================
        # 搜索服务 (search-service) - 优先级: 20
        # ========================================
        
        # 搜索API
        - id: search-api
          uri: lb://search-service
          order: 20
          predicates:
            - Path=/search/**
        
        # ========================================
        # 日志服务 (log-service) - 优先级: 20
        # ========================================
        
        # 日志API
        - id: log-api
          uri: lb://log-service
          order: 20
          predicates:
            - Path=/log/**
        
        # ========================================
        # Knife4j文档路由 - 优先级: 50
        # ========================================
        
        # 认证服务文档
        - id: auth-service-doc
          uri: lb://auth-service
          order: 50
          predicates:
            - Path=/auth-service/doc.html,/auth-service/webjars/**,/auth-service/swagger-ui/**,/auth-service/v3/api-docs/**,/auth-service/swagger-resources/**
        
        # 用户服务文档
        - id: user-service-doc
          uri: lb://user-service
          order: 50
          predicates:
            - Path=/user-service/doc.html,/user-service/webjars/**,/user-service/swagger-ui/**,/user-service/v3/api-docs/**,/user-service/swagger-resources/**
        
        # 产品服务文档
        - id: product-service-doc
          uri: lb://product-service
          order: 50
          predicates:
            - Path=/product-service/doc.html,/product-service/webjars/**,/product-service/swagger-ui/**,/product-service/v3/api-docs/**,/product-service/swagger-resources/**
        
        # 订单服务文档
        - id: order-service-doc
          uri: lb://order-service
          order: 50
          predicates:
            - Path=/order-service/doc.html,/order-service/webjars/**,/order-service/swagger-ui/**,/order-service/v3/api-docs/**,/order-service/swagger-resources/**
        
        # 支付服务文档
        - id: payment-service-doc
          uri: lb://payment-service
          order: 50
          predicates:
            - Path=/payment-service/doc.html,/payment-service/webjars/**,/payment-service/swagger-ui/**,/payment-service/v3/api-docs/**,/payment-service/swagger-resources/**
        
        # 库存服务文档
        - id: stock-service-doc
          uri: lb://stock-service
          order: 50
          predicates:
            - Path=/stock-service/doc.html,/stock-service/webjars/**,/stock-service/swagger-ui/**,/stock-service/v3/api-docs/**,/stock-service/swagger-resources/**
        
        # 搜索服务文档
        - id: search-service-doc
          uri: lb://search-service
          order: 50
          predicates:
            - Path=/search-service/doc.html,/search-service/webjars/**,/search-service/swagger-ui/**,/search-service/v3/api-docs/**,/search-service/swagger-resources/**
        
        # 日志服务文档
        - id: log-service-doc
          uri: lb://log-service
          order: 50
          predicates:
            - Path=/log-service/doc.html,/log-service/webjars/**,/log-service/swagger-ui/**,/log-service/v3/api-docs/**,/log-service/swagger-resources/**

      # 服务发现配置
      discovery:
        locator:
          enabled: false  # 禁用自动服务发现
          lower-case-service-id: true
