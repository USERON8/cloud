2025-09-26 16:53:26.427 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-26 16:53:26.478 [main] INFO  [] com.cloud.product.ProductApplication - Starting ProductApplication using Java 17.0.14 with PID 18368 (D:\Download\Code\sofware\cloud\product-service\target\classes started by what's up in D:\Download\Code\sofware\cloud\product-service)
2025-09-26 16:53:26.479 [main] DEBUG [] com.cloud.product.ProductApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-26 16:53:26.479 [main] INFO  [] com.cloud.product.ProductApplication - The following 1 profile is active: "dev"
2025-09-26 16:53:26.538 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-26 16:53:27.478 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-26 16:53:27.478 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-26 16:53:27.479 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-26 16:53:27.479 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-26 16:53:27.479 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-26 16:53:27.479 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-26 16:53:27.479 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-26 16:53:28.011 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-26 16:53:28.014 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-26 16:53:28.048 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2025-09-26 16:53:28.260 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-26 16:53:28.274 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-26 16:53:28.420 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=9452171c-c7d3-38f9-ae44-095bc09a7943
2025-09-26 16:53:29.484 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8083 (http)
2025-09-26 16:53:29.498 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8083"]
2025-09-26 16:53:29.500 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-26 16:53:29.500 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-26 16:53:29.573 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-26 16:53:29.573 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3034 ms
2025-09-26 16:53:29.871 [main] INFO  [] com.cloud.product.config.LocalCacheConfig - 初始化商品服务本地缓存管理器
2025-09-26 16:53:29.872 [main] INFO  [] c.cloud.common.config.MultiLevelCacheConfigFactory - 创建商品服务多级缓存配置
2025-09-26 16:53:29.989 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-26 16:53:30.408 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:53:30.451 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 8 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:53:30.556 [main] INFO  [] com.cloud.product.config.RedisConfig - 初始化商品服务Redis配置
2025-09-26 16:53:30.557 [main] INFO  [] com.cloud.common.config.RedisConfigFactory - 创建缓存专用RedisTemplate配置
2025-09-26 16:53:30.796 [main] INFO  [] com.cloud.product.config.ProductMessageConfig - ✅ 商品服务消息配置已加载 - RocketMQ集成启用
2025-09-26 16:53:30.810 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - 初始化商品服务事务和缓存配置
2025-09-26 16:53:30.810 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 事务管理: 已启用 (支持回滚)
2025-09-26 16:53:30.811 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 多级缓存: 已启用 (L1: Caffeine + L2: Redis)
2025-09-26 16:53:30.811 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - AOP代理: 已启用 (支持自调用)
2025-09-26 16:53:30.863 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务MyBatis Plus拦截器配置
2025-09-26 16:53:30.865 [main] INFO  [] com.cloud.common.config.MybatisPlusConfigFactory - 创建标准MyBatis Plus拦截器 - 数据库类型: MYSQL
2025-09-26 16:53:30.941 [main] DEBUG [] c.baomidou.mybatisplus.core.spi.CompatibleHelper - Load compatibleSet: com.baomidou.mybatisplus.extension.spi.SpringCompatibleSet@6208f81c
2025-09-26 16:53:30.980 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务元数据处理器
2025-09-26 16:53:31.005 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'MybatisPlusInterceptor{interceptors=[PaginationInnerInterceptor(logger=org.apache.ibatis.logging.slf4j.Slf4jImpl@795ef208, overflow=false, maxLimit=null, dbType=MYSQL, dialect=null, optimizeJoin=true), com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor@5259469d, com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor@18c8a027]}'
2025-09-26 16:53:31.134 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\CategoryMapper.xml]'
2025-09-26 16:53:31.163 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ProductMapper.xml]'
2025-09-26 16:53:31.188 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ShopMapper.xml]'
2025-09-26 16:53:32.239 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:53:32.633 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'stock-service' URL not provided. Will try picking an instance via load-balancing.
2025-09-26 16:53:32.942 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-09-26 16:53:32.957 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
2025-09-26 16:53:32.958 [main] WARN  [] o.s.c.a.AnnotationConfigApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'meterRegistryCloser': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:303)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:267)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:145)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:460)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:114)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1467)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1219)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:640)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:29)
2025-09-26 16:53:32.978 [main] INFO  [] org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-26 16:53:33.050 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-26 16:53:33.066 [main] ERROR [] org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:29)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:87)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:71)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1657)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "6000ms"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:668)
	at java.base/java.lang.Integer.valueOf(Integer.java:999)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:201)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:439)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:412)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:161)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:80)
	... 26 common frames omitted
2025-09-26 16:53:33.975 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:53:33.975 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:53:33.975 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:57:19.562 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-26 16:57:19.638 [main] INFO  [] com.cloud.product.ProductApplication - Starting ProductApplication using Java 17.0.14 with PID 13432 (D:\Download\Code\sofware\cloud\product-service\target\classes started by what's up in D:\Download\Code\sofware\cloud\product-service)
2025-09-26 16:57:19.640 [main] DEBUG [] com.cloud.product.ProductApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-26 16:57:19.641 [main] INFO  [] com.cloud.product.ProductApplication - The following 1 profile is active: "dev"
2025-09-26 16:57:19.705 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-26 16:57:20.988 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-26 16:57:20.988 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-26 16:57:20.990 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-26 16:57:20.991 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-26 16:57:20.992 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-26 16:57:20.992 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-26 16:57:20.992 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-26 16:57:21.793 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-26 16:57:21.796 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-26 16:57:21.830 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-09-26 16:57:22.138 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-26 16:57:22.157 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-26 16:57:22.371 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=90b28ce5-8010-32be-95ed-33bb75887be2
2025-09-26 16:57:23.731 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8083 (http)
2025-09-26 16:57:23.754 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8083"]
2025-09-26 16:57:23.757 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-26 16:57:23.758 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-26 16:57:23.887 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-26 16:57:23.887 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4179 ms
2025-09-26 16:57:24.320 [main] INFO  [] com.cloud.product.config.LocalCacheConfig - 初始化商品服务本地缓存管理器
2025-09-26 16:57:24.321 [main] INFO  [] c.cloud.common.config.MultiLevelCacheConfigFactory - 创建商品服务多级缓存配置
2025-09-26 16:57:24.473 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-26 16:57:24.987 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:57:25.045 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 8 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:57:25.175 [main] INFO  [] com.cloud.product.config.RedisConfig - 初始化商品服务Redis配置
2025-09-26 16:57:25.176 [main] INFO  [] com.cloud.common.config.RedisConfigFactory - 创建缓存专用RedisTemplate配置
2025-09-26 16:57:25.465 [main] INFO  [] com.cloud.product.config.ProductMessageConfig - ✅ 商品服务消息配置已加载 - RocketMQ集成启用
2025-09-26 16:57:25.481 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - 初始化商品服务事务和缓存配置
2025-09-26 16:57:25.481 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 事务管理: 已启用 (支持回滚)
2025-09-26 16:57:25.482 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 多级缓存: 已启用 (L1: Caffeine + L2: Redis)
2025-09-26 16:57:25.482 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - AOP代理: 已启用 (支持自调用)
2025-09-26 16:57:25.557 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务MyBatis Plus拦截器配置
2025-09-26 16:57:25.560 [main] INFO  [] com.cloud.common.config.MybatisPlusConfigFactory - 创建标准MyBatis Plus拦截器 - 数据库类型: MYSQL
2025-09-26 16:57:25.662 [main] DEBUG [] c.baomidou.mybatisplus.core.spi.CompatibleHelper - Load compatibleSet: com.baomidou.mybatisplus.extension.spi.SpringCompatibleSet@346d441a
2025-09-26 16:57:25.706 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务元数据处理器
2025-09-26 16:57:25.737 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'MybatisPlusInterceptor{interceptors=[PaginationInnerInterceptor(logger=org.apache.ibatis.logging.slf4j.Slf4jImpl@a263df9, overflow=false, maxLimit=null, dbType=MYSQL, dialect=null, optimizeJoin=true), com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor@29794ef5, com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor@623eebca]}'
2025-09-26 16:57:25.895 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\CategoryMapper.xml]'
2025-09-26 16:57:25.936 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ProductMapper.xml]'
2025-09-26 16:57:25.963 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ShopMapper.xml]'
2025-09-26 16:57:27.173 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:27.644 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'stock-service' URL not provided. Will try picking an instance via load-balancing.
2025-09-26 16:57:27.997 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-09-26 16:57:28.042 [main] INFO  [] com.cloud.common.config.base.BaseRedisConfig - 初始化StringRedisTemplate配置
2025-09-26 16:57:28.091 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品异步线程池配置完成 - 核心线程数: 2, 最大线程数: 4, 队列容量: 500
2025-09-26 16:57:28.112 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品日志线程池配置完成 - 核心线程数: 1, 最大线程数: 2, 队列容量: 1000
2025-09-26 16:57:28.129 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品统计线程池配置完成 - 核心线程数: 1, 最大线程数: 3, 队列容量: 2000
2025-09-26 16:57:28.146 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品搜索线程池配置完成 - 核心线程数: 1, 最大线程数: 2, 队列容量: 300
2025-09-26 16:57:28.178 [main] INFO  [] com.cloud.product.config.ProductHybridCacheConfig - ✅ 初始化 HybridCacheManager (product-service)
2025-09-26 16:57:28.917 [main] INFO  [] o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-09-26 16:57:29.336 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - ✅ JWT解码器配置完成，验证器数量: 1
2025-09-26 16:57:29.435 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - ✅ 商品服务 OAuth2资源服务器配置完成
2025-09-26 16:57:29.436 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT验证端点: http://127.0.0.1:80/.well-known/jwks.json
2025-09-26 16:57:29.436 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT缓存时间: PT30M
2025-09-26 16:57:29.436 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT发行者: http://localhost:8080
2025-09-26 16:57:29.528 [main] INFO  [] com.cloud.common.config.BaseAsyncConfig - ✅ 默认异步线程池初始化完成 - 核心线程数: 12, 最大线程数: 36, 队列容量: 300
2025-09-26 16:57:29.541 [main] INFO  [] com.cloud.common.config.BaseAsyncConfig - ✅ 消息异步线程池初始化完成 - 核心线程数: 3, 最大线程数: 8, 队列容量: 100
2025-09-26 16:57:29.557 [main] INFO  [] com.cloud.common.config.RocketMQConfig - ✅ RocketMQ配置已加载
2025-09-26 16:57:29.560 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:29.570 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:29.575 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:29.579 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:29.584 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:29.588 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:57:30.267 [main] INFO  [] c.b.m.e.spring.MybatisPlusApplicationContextAware - Register ApplicationContext instances org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@6ed043d3
2025-09-26 16:57:30.273 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.cloud.common.config.RedissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
2025-09-26 16:57:30.277 [main] WARN  [] o.s.c.a.AnnotationConfigApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'meterRegistryCloser': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:303)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:267)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:145)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:460)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:114)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1467)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1219)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:640)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:40)
2025-09-26 16:57:30.303 [main] INFO  [] org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-26 16:57:30.388 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-26 16:57:30.406 [main] ERROR [] org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.cloud.common.config.RedissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:40)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:87)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:71)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1657)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "6000ms"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:668)
	at java.base/java.lang.Integer.valueOf(Integer.java:999)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:201)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:439)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:412)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:161)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:80)
	... 26 common frames omitted
2025-09-26 16:57:31.296 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:57:31.296 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:57:31.296 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:58:29.463 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-26 16:58:29.524 [main] INFO  [] com.cloud.product.ProductApplication - Starting ProductApplication using Java 17.0.14 with PID 3440 (D:\Download\Code\sofware\cloud\product-service\target\classes started by what's up in D:\Download\Code\sofware\cloud\product-service)
2025-09-26 16:58:29.525 [main] DEBUG [] com.cloud.product.ProductApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-26 16:58:29.525 [main] INFO  [] com.cloud.product.ProductApplication - The following 1 profile is active: "dev"
2025-09-26 16:58:29.583 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-26 16:58:30.612 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-26 16:58:30.613 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-26 16:58:30.615 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-26 16:58:30.616 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-26 16:58:30.616 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-26 16:58:30.617 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-26 16:58:30.617 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-26 16:58:31.494 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-26 16:58:31.499 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-26 16:58:31.533 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-09-26 16:58:31.820 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-26 16:58:31.837 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-26 16:58:32.071 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e4a5c612-42ff-318e-8922-97db7b901e24
2025-09-26 16:58:33.780 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8083 (http)
2025-09-26 16:58:33.796 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8083"]
2025-09-26 16:58:33.797 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-26 16:58:33.797 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-26 16:58:33.877 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-26 16:58:33.878 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4293 ms
2025-09-26 16:58:34.285 [main] INFO  [] com.cloud.product.config.LocalCacheConfig - 初始化商品服务本地缓存管理器
2025-09-26 16:58:34.285 [main] INFO  [] c.cloud.common.config.MultiLevelCacheConfigFactory - 创建商品服务多级缓存配置
2025-09-26 16:58:34.457 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-26 16:58:35.007 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:58:35.080 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 8 connections initialized for localhost/127.0.0.1:6379
2025-09-26 16:58:35.246 [main] INFO  [] com.cloud.product.config.RedisConfig - 初始化商品服务Redis配置
2025-09-26 16:58:35.248 [main] INFO  [] com.cloud.common.config.RedisConfigFactory - 创建缓存专用RedisTemplate配置
2025-09-26 16:58:35.636 [main] INFO  [] com.cloud.product.config.ProductMessageConfig - ✅ 商品服务消息配置已加载 - RocketMQ集成启用
2025-09-26 16:58:35.657 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - 初始化商品服务事务和缓存配置
2025-09-26 16:58:35.658 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 事务管理: 已启用 (支持回滚)
2025-09-26 16:58:35.658 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 多级缓存: 已启用 (L1: Caffeine + L2: Redis)
2025-09-26 16:58:35.658 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - AOP代理: 已启用 (支持自调用)
2025-09-26 16:58:35.749 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务MyBatis Plus拦截器配置
2025-09-26 16:58:35.752 [main] INFO  [] com.cloud.common.config.MybatisPlusConfigFactory - 创建标准MyBatis Plus拦截器 - 数据库类型: MYSQL
2025-09-26 16:58:35.859 [main] DEBUG [] c.baomidou.mybatisplus.core.spi.CompatibleHelper - Load compatibleSet: com.baomidou.mybatisplus.extension.spi.SpringCompatibleSet@5be521cd
2025-09-26 16:58:35.927 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务元数据处理器
2025-09-26 16:58:35.969 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'MybatisPlusInterceptor{interceptors=[PaginationInnerInterceptor(logger=org.apache.ibatis.logging.slf4j.Slf4jImpl@1b61c1, overflow=false, maxLimit=null, dbType=MYSQL, dialect=null, optimizeJoin=true), com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor@479f1d09, com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor@5caf9ea4]}'
2025-09-26 16:58:36.182 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\CategoryMapper.xml]'
2025-09-26 16:58:36.225 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ProductMapper.xml]'
2025-09-26 16:58:36.258 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ShopMapper.xml]'
2025-09-26 16:58:37.648 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 16:58:38.065 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'stock-service' URL not provided. Will try picking an instance via load-balancing.
2025-09-26 16:58:38.423 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-09-26 16:58:38.441 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
2025-09-26 16:58:38.442 [main] WARN  [] o.s.c.a.AnnotationConfigApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'meterRegistryCloser': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:303)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:267)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:145)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:460)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:114)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1467)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1219)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:640)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:39)
2025-09-26 16:58:38.469 [main] INFO  [] org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-26 16:58:38.541 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-26 16:58:38.559 [main] ERROR [] org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:39)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:87)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:71)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1657)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "6000ms"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:668)
	at java.base/java.lang.Integer.valueOf(Integer.java:999)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:201)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:439)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:412)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:161)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:80)
	... 26 common frames omitted
2025-09-26 16:58:39.461 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:58:39.461 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 16:58:39.461 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:02:30.419 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-26 17:02:30.479 [main] INFO  [] com.cloud.product.ProductApplication - Starting ProductApplication using Java 17.0.14 with PID 9880 (D:\Download\Code\sofware\cloud\product-service\target\classes started by what's up in D:\Download\Code\sofware\cloud\product-service)
2025-09-26 17:02:30.480 [main] DEBUG [] com.cloud.product.ProductApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-26 17:02:30.481 [main] INFO  [] com.cloud.product.ProductApplication - The following 1 profile is active: "dev"
2025-09-26 17:02:30.534 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-26 17:02:31.720 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-26 17:02:31.721 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-26 17:02:31.721 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-26 17:02:31.721 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-26 17:02:31.722 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-26 17:02:31.722 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-26 17:02:31.722 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-26 17:02:32.399 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-26 17:02:32.402 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-26 17:02:32.427 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-09-26 17:02:32.657 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-26 17:02:32.667 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-26 17:02:32.849 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e4a5c612-42ff-318e-8922-97db7b901e24
2025-09-26 17:02:34.048 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8083 (http)
2025-09-26 17:02:34.066 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8083"]
2025-09-26 17:02:34.067 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-26 17:02:34.068 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-26 17:02:34.151 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-26 17:02:34.152 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3616 ms
2025-09-26 17:02:34.548 [main] INFO  [] com.cloud.product.config.LocalCacheConfig - 初始化商品服务本地缓存管理器
2025-09-26 17:02:34.549 [main] INFO  [] c.cloud.common.config.MultiLevelCacheConfigFactory - 创建商品服务多级缓存配置
2025-09-26 17:02:34.717 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-26 17:02:35.180 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-26 17:02:35.241 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 8 connections initialized for localhost/127.0.0.1:6379
2025-09-26 17:02:35.350 [main] INFO  [] com.cloud.product.config.RedisConfig - 初始化商品服务Redis配置
2025-09-26 17:02:35.351 [main] INFO  [] com.cloud.common.config.RedisConfigFactory - 创建缓存专用RedisTemplate配置
2025-09-26 17:02:35.621 [main] INFO  [] com.cloud.product.config.ProductMessageConfig - ✅ 商品服务消息配置已加载 - RocketMQ集成启用
2025-09-26 17:02:35.639 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - 初始化商品服务事务和缓存配置
2025-09-26 17:02:35.639 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 事务管理: 已启用 (支持回滚)
2025-09-26 17:02:35.639 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 多级缓存: 已启用 (L1: Caffeine + L2: Redis)
2025-09-26 17:02:35.640 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - AOP代理: 已启用 (支持自调用)
2025-09-26 17:02:35.695 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务MyBatis Plus拦截器配置
2025-09-26 17:02:35.697 [main] INFO  [] com.cloud.common.config.MybatisPlusConfigFactory - 创建标准MyBatis Plus拦截器 - 数据库类型: MYSQL
2025-09-26 17:02:35.781 [main] DEBUG [] c.baomidou.mybatisplus.core.spi.CompatibleHelper - Load compatibleSet: com.baomidou.mybatisplus.extension.spi.SpringCompatibleSet@5dd3841
2025-09-26 17:02:35.822 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务元数据处理器
2025-09-26 17:02:35.851 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'MybatisPlusInterceptor{interceptors=[PaginationInnerInterceptor(logger=org.apache.ibatis.logging.slf4j.Slf4jImpl@47db20e0, overflow=false, maxLimit=null, dbType=MYSQL, dialect=null, optimizeJoin=true), com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor@69a61267, com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor@795ef208]}'
2025-09-26 17:02:35.995 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\CategoryMapper.xml]'
2025-09-26 17:02:36.057 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ProductMapper.xml]'
2025-09-26 17:02:36.082 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ShopMapper.xml]'
2025-09-26 17:02:37.087 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:02:37.461 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'stock-service' URL not provided. Will try picking an instance via load-balancing.
2025-09-26 17:02:37.717 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-09-26 17:02:37.732 [main] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
2025-09-26 17:02:37.733 [main] WARN  [] o.s.c.a.AnnotationConfigApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'meterRegistryCloser': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:303)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.retrieveApplicationListeners(AbstractApplicationEventMulticaster.java:267)
	at org.springframework.context.event.AbstractApplicationEventMulticaster.getApplicationListeners(AbstractApplicationEventMulticaster.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:145)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:460)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.cloud.context.named.NamedContextFactory.destroy(NamedContextFactory.java:114)
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:798)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:748)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1474)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:707)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1467)
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1219)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:640)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:41)
2025-09-26 17:02:37.756 [main] INFO  [] org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2025-09-26 17:02:37.829 [main] INFO  [] o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-26 17:02:37.847 [main] ERROR [] org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConfig': Unsatisfied dependency expressed through field 'timeout': Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.cloud.product.ProductApplication.main(ProductApplication.java:41)
Caused by: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; For input string: "6000ms"
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:87)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:71)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1657)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: java.lang.NumberFormatException: For input string: "6000ms"
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:67)
	at java.base/java.lang.Integer.parseInt(Integer.java:668)
	at java.base/java.lang.Integer.valueOf(Integer.java:999)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:201)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:439)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:412)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:161)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:80)
	... 26 common frames omitted
2025-09-26 17:02:38.754 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:02:38.754 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:02:38.754 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:10.999 [background-preinit] INFO  [] org.hibernate.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-09-26 17:06:11.055 [main] INFO  [] com.cloud.product.ProductApplication - Starting ProductApplication using Java 17.0.14 with PID 20084 (D:\Download\Code\sofware\cloud\product-service\target\classes started by what's up in D:\Download\Code\sofware\cloud\product-service)
2025-09-26 17:06:11.057 [main] DEBUG [] com.cloud.product.ProductApplication - Running with Spring Boot v3.5.3, Spring v6.2.8
2025-09-26 17:06:11.057 [main] INFO  [] com.cloud.product.ProductApplication - The following 1 profile is active: "dev"
2025-09-26 17:06:11.113 [main] INFO  [] c.a.cloud.nacos.configdata.NacosConfigDataLoader - [Nacos Config] Load config[dataId=common, group=DEFAULT_GROUP] success
2025-09-26 17:06:12.004 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/auth/AuthFeignClient.class]
2025-09-26 17:06:12.005 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/order/OrderFeignClient.class]
2025-09-26 17:06:12.005 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/payment/PaymentFeignClient.class]
2025-09-26 17:06:12.005 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/product/ProductFeignClient.class]
2025-09-26 17:06:12.006 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/stock/StockFeignClient.class]
2025-09-26 17:06:12.006 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/AdminFeignClient.class]
2025-09-26 17:06:12.006 [main] DEBUG [] o.s.cloud.openfeign.FeignClientsRegistrar$1 - Identified candidate component class: URL [jar:file:/D:/Deveplement/apache-maven-3.9.9/repository/com/cloud/api-module/0.0.1-SNAPSHOT/api-module-0.0.1-SNAPSHOT.jar!/com/cloud/api/user/UserFeignClient.class]
2025-09-26 17:06:12.513 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-26 17:06:12.516 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-09-26 17:06:12.543 [main] INFO  [] o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2025-09-26 17:06:12.765 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-09-26 17:06:12.774 [main] INFO  [] o.s.i.c.DefaultConfiguringBeanFactoryPostProcessor - No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-09-26 17:06:12.910 [main] INFO  [] o.springframework.cloud.context.scope.GenericScope - BeanFactory id=7605b0da-06a3-3025-84f6-c23d1f0222f9
2025-09-26 17:06:13.920 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port 8083 (http)
2025-09-26 17:06:13.931 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8083"]
2025-09-26 17:06:13.933 [main] INFO  [] org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-09-26 17:06:13.933 [main] INFO  [] org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-09-26 17:06:14.012 [main] INFO  [] o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-09-26 17:06:14.012 [main] INFO  [] o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2898 ms
2025-09-26 17:06:14.345 [main] INFO  [] com.cloud.product.config.LocalCacheConfig - 初始化商品服务本地缓存管理器
2025-09-26 17:06:14.346 [main] INFO  [] c.cloud.common.config.MultiLevelCacheConfigFactory - 创建商品服务多级缓存配置
2025-09-26 17:06:14.477 [main] INFO  [] org.redisson.Version - Redisson 3.51.0
2025-09-26 17:06:14.855 [redisson-netty-1-7] INFO  [] org.redisson.connection.ConnectionsHolder - 1 connections initialized for localhost/127.0.0.1:6379
2025-09-26 17:06:14.895 [redisson-netty-1-20] INFO  [] org.redisson.connection.ConnectionsHolder - 8 connections initialized for localhost/127.0.0.1:6379
2025-09-26 17:06:14.979 [main] INFO  [] com.cloud.product.config.RedisConfig - 初始化商品服务Redis配置
2025-09-26 17:06:14.980 [main] INFO  [] com.cloud.common.config.RedisConfigFactory - 创建缓存专用RedisTemplate配置
2025-09-26 17:06:15.202 [main] INFO  [] com.cloud.product.config.ProductMessageConfig - ✅ 商品服务消息配置已加载 - RocketMQ集成启用
2025-09-26 17:06:15.218 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - 初始化商品服务事务和缓存配置
2025-09-26 17:06:15.218 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 事务管理: 已启用 (支持回滚)
2025-09-26 17:06:15.218 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - 多级缓存: 已启用 (L1: Caffeine + L2: Redis)
2025-09-26 17:06:15.219 [main] INFO  [] com.cloud.product.config.TransactionCacheConfig - - AOP代理: 已启用 (支持自调用)
2025-09-26 17:06:15.267 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务MyBatis Plus拦截器配置
2025-09-26 17:06:15.269 [main] INFO  [] com.cloud.common.config.MybatisPlusConfigFactory - 创建标准MyBatis Plus拦截器 - 数据库类型: MYSQL
2025-09-26 17:06:15.339 [main] DEBUG [] c.baomidou.mybatisplus.core.spi.CompatibleHelper - Load compatibleSet: com.baomidou.mybatisplus.extension.spi.SpringCompatibleSet@5a77e0e4
2025-09-26 17:06:15.377 [main] INFO  [] com.cloud.product.config.ProductMybatisPlusConfig - 初始化商品服务元数据处理器
2025-09-26 17:06:15.401 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Registered plugin: 'MybatisPlusInterceptor{interceptors=[PaginationInnerInterceptor(logger=org.apache.ibatis.logging.slf4j.Slf4jImpl@78a03662, overflow=false, maxLimit=null, dbType=MYSQL, dialect=null, optimizeJoin=true), com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor@6135bb54, com.baomidou.mybatisplus.extension.plugins.inner.BlockAttackInnerInterceptor@407339e5]}'
2025-09-26 17:06:15.525 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\CategoryMapper.xml]'
2025-09-26 17:06:15.549 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ProductMapper.xml]'
2025-09-26 17:06:15.572 [main] DEBUG [] c.b.m.e.spring.MybatisSqlSessionFactoryBean - Parsed mapper file: 'file [D:\Download\Code\sofware\cloud\product-service\target\classes\mapper\ShopMapper.xml]'
2025-09-26 17:06:16.529 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:16.969 [main] INFO  [] o.s.cloud.openfeign.FeignClientFactoryBean - For 'stock-service' URL not provided. Will try picking an instance via load-balancing.
2025-09-26 17:06:17.281 [main] INFO  [] com.cloud.common.config.PermissionConfig - 权限配置初始化完成，用户类型数量: 3, 角色数量: 3
2025-09-26 17:06:17.313 [main] INFO  [] com.cloud.common.config.base.BaseRedisConfig - 初始化StringRedisTemplate配置
2025-09-26 17:06:17.360 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品异步线程池配置完成 - 核心线程数: 2, 最大线程数: 4, 队列容量: 500
2025-09-26 17:06:17.385 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品日志线程池配置完成 - 核心线程数: 1, 最大线程数: 2, 队列容量: 1000
2025-09-26 17:06:17.408 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品统计线程池配置完成 - 核心线程数: 1, 最大线程数: 3, 队列容量: 2000
2025-09-26 17:06:17.429 [main] INFO  [] com.cloud.product.config.ProductAsyncConfig - ✅ 商品搜索线程池配置完成 - 核心线程数: 1, 最大线程数: 2, 队列容量: 300
2025-09-26 17:06:17.458 [main] INFO  [] com.cloud.product.config.ProductHybridCacheConfig - ✅ 初始化 HybridCacheManager (product-service)
2025-09-26 17:06:18.142 [main] INFO  [] o.s.b.actuate.endpoint.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2025-09-26 17:06:18.401 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - ✅ JWT解码器配置完成，验证器数量: 1
2025-09-26 17:06:18.492 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig - ✅ 商品服务 OAuth2资源服务器配置完成
2025-09-26 17:06:18.492 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT验证端点: http://127.0.0.1:80/.well-known/jwks.json
2025-09-26 17:06:18.492 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT缓存时间: PT30M
2025-09-26 17:06:18.492 [main] INFO  [] c.c.c.config.base.BaseOAuth2ResourceServerConfig -    - JWT发行者: http://localhost:8080
2025-09-26 17:06:18.583 [main] INFO  [] com.cloud.common.config.BaseAsyncConfig - ✅ 默认异步线程池初始化完成 - 核心线程数: 12, 最大线程数: 36, 队列容量: 300
2025-09-26 17:06:18.601 [main] INFO  [] com.cloud.common.config.BaseAsyncConfig - ✅ 消息异步线程池初始化完成 - 核心线程数: 3, 最大线程数: 8, 队列容量: 100
2025-09-26 17:06:18.621 [main] INFO  [] com.cloud.common.config.BaseAsyncConfig - ✅ 批处理异步线程池初始化完成 - 核心线程数: 2, 最大线程数: 6, 队列容量: 200
2025-09-26 17:06:18.640 [main] INFO  [] com.cloud.common.config.RocketMQConfig - ✅ RocketMQ配置已加载
2025-09-26 17:06:18.642 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:18.649 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:18.654 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:18.658 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:18.661 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:18.666 [main] DEBUG [] o.s.cloud.openfeign.FeignClientFactoryBean - Creating a FeignClientFactoryBean.
2025-09-26 17:06:19.324 [main] INFO  [] c.b.m.e.spring.MybatisPlusApplicationContextAware - Register ApplicationContext instances org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@43acd79e
2025-09-26 17:06:20.915 [main] INFO  [] com.cloud.common.monitoring.PerformanceMonitor - 性能监控指标已注册到MeterRegistry
2025-09-26 17:06:20.956 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-09-26 17:06:20.956 [main] INFO  [] o.s.integration.channel.PublishSubscribeChannel - Channel 'product-service.errorChannel' has 1 subscriber(s).
2025-09-26 17:06:20.956 [main] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - started bean '_org.springframework.integration.errorLogger'
2025-09-26 17:06:20.957 [main] INFO  [] org.apache.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8083"]
2025-09-26 17:06:20.971 [main] INFO  [] o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port 8083 (http) with context path '/'
2025-09-26 17:06:21.157 [main] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP product-service 172.20.10.2:8083 register finished
2025-09-26 17:06:21.434 [main] DEBUG [] o.s.d.redis.listener.RedisMessageListenerContainer - Starting RedisMessageListenerContainer...
2025-09-26 17:06:21.435 [main] DEBUG [] o.s.d.redis.listener.RedisMessageListenerContainer - Postpone listening for Redis messages until actual listeners are added
2025-09-26 17:06:21.454 [main] INFO  [] com.cloud.product.ProductApplication - Started ProductApplication in 12.461 seconds (process running for 12.923)
2025-09-26 17:06:21.494 [main] INFO  [] c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=common, group=DEFAULT_GROUP
2025-09-26 17:06:21.495 [main] INFO  [] com.cloud.product.ProductApplication - 商品服务启动完成！
2025-09-26 17:06:30.458 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-09-26 17:06:30.456 [nacos.publisher-com.alibaba.nacos.client.naming.event.InstancesChangeEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.457 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.457 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchNotifyEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.456 [nacos.publisher-com.alibaba.nacos.common.notify.SlowEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.456 [nacos.publisher-com.alibaba.nacos.client.naming.event.NamingFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.457 [nacos.publisher-com.alibaba.nacos.client.config.impl.ConfigFuzzyWatchLoadEvent] ERROR [] com.alibaba.nacos.common.notify.NotifyCenter - Event listener exception : 
java.lang.InterruptedException: null
	at java.base/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1645)
	at java.base/java.util.concurrent.ArrayBlockingQueue.take(ArrayBlockingQueue.java:420)
	at com.alibaba.nacos.common.notify.DefaultPublisher.openEventHandler(DefaultPublisher.java:111)
	at com.alibaba.nacos.common.notify.DefaultPublisher.run(DefaultPublisher.java:95)
2025-09-26 17:06:30.468 [SpringApplicationShutdownHook] INFO  [] c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-09-26 17:06:30.472 [SpringApplicationShutdownHook] WARN  [] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception thrown from ApplicationListener handling ContextClosedEvent
java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
	at com.alibaba.nacos.common.notify.NotifyCenter.deregisterSubscriber(NotifyCenter.java:242)
	at com.alibaba.nacos.client.naming.remote.gprc.NamingGrpcClientProxy.shutdown(NamingGrpcClientProxy.java:537)
	at com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate.shutdown(NamingClientProxyDelegate.java:212)
	at com.alibaba.nacos.client.naming.NacosNamingService.shutDown(NacosNamingService.java:637)
	at com.alibaba.cloud.nacos.NacosServiceManager.nacosServiceShutDown(NacosServiceManager.java:117)
	at com.alibaba.cloud.nacos.registry.NacosServiceRegistry.close(NacosServiceRegistry.java:120)
	at org.springframework.cloud.client.serviceregistry.AbstractAutoServiceRegistration.stop(AbstractAutoServiceRegistration.java:311)
	at com.alibaba.cloud.nacos.registry.NacosAutoServiceRegistration.onContextClosedEvent(NacosAutoServiceRegistration.java:122)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:382)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:254)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:173)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1163)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-09-26 17:06:30.478 [SpringApplicationShutdownHook] DEBUG [] o.s.d.redis.listener.RedisMessageListenerContainer - Stopped RedisMessageListenerContainer
2025-09-26 17:06:30.479 [SpringApplicationShutdownHook] INFO  [] o.s.boot.web.embedded.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-09-26 17:06:30.544 [tomcat-shutdown] INFO  [] o.s.boot.web.embedded.tomcat.GracefulShutdown - Graceful shutdown complete
2025-09-26 17:06:30.546 [SpringApplicationShutdownHook] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - Removing {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-09-26 17:06:30.546 [SpringApplicationShutdownHook] INFO  [] o.s.integration.channel.PublishSubscribeChannel - Channel 'product-service.errorChannel' has 0 subscriber(s).
2025-09-26 17:06:30.546 [SpringApplicationShutdownHook] INFO  [] o.s.integration.endpoint.EventDrivenConsumer - stopped bean '_org.springframework.integration.errorLogger'
2025-09-26 17:06:30.554 [SpringApplicationShutdownHook] WARN  [] o.s.beans.factory.support.DisposableBeanAdapter - Custom destroy method 'close' on bean with name 'nacosServiceRegistry' propagated an exception: java.lang.NullPointerException: Cannot read field "sharePublisher" because "com.alibaba.nacos.common.notify.NotifyCenter.INSTANCE" is null
