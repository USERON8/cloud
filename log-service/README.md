# 日志服务 (Log Service)

## 简介

日志服务是电商平台的操作日志管理服务，负责收集、存储和查询各服务的操作日志。通过消息队列接收来自其他服务的日志事件，并提供日志查询接口。

## 核心功能

1. **操作日志收集**
    - 通过消息队列接收各服务的操作日志
    - 实现日志的幂等性处理

2. **操作日志存储**
    - 将操作日志存储到Elasticsearch，便于搜索和分析
    - 支持多种服务类型的日志存储（管理员、商家、用户、商品、支付、库存等）

3. **操作日志查询**
    - 提供操作日志的查询接口
    - 支持分页查询

## 技术栈

- Spring Boot
- Nacos (服务注册与发现、配置管理)
- RocketMQ (消息队列)
- Elasticsearch (日志搜索和分析)

## 日志类型

1. **管理员操作日志** - 记录管理员的操作行为
2. **商家操作日志** - 记录商家的操作行为
3. **用户操作日志** - 记录用户的操作行为
4. **商品操作日志** - 记录商品相关的操作
5. **支付操作日志** - 记录支付相关的操作
6. **库存操作日志** - 记录库存变更操作

## 核心处理逻辑

通过RocketMQ消息队列接收来自其他服务的日志事件，处理各种类型的日志：

```java
// 通用日志处理
public Consumer<GenericLogEvent> genericLogConsumer() {
    return event -> {
        // 幂等性检查
        // 转换并保存日志到Elasticsearch
    };
}
```

## 部署说明

```bash
# 编译打包
mvn clean package

# 运行服务
java -jar target/log-service.jar
```